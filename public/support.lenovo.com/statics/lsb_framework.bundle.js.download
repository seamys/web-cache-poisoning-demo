var _lsbSessionId;!function(e){var t=function(){function t(){}return t.IsValidVersion=function(e,t){if(e===t)return!0;var n=t.split("."),i=e.split(".");if(n.length!==i.length)return!1;var a=t.replace(/\./g,""),o=e.replace(/\./g,"");return parseInt(o)<=parseInt(a)},t.CheckBrowser=function(){var t="opera"in window||navigator.userAgent.indexOf(" OPR/")>=0;return t?e.Utility.BrowserTypeEnum.Opera:"undefined"!=typeof InstallTrigger?e.Utility.BrowserTypeEnum.Firefox:Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0?e.Utility.BrowserTypeEnum.Safari:"chrome"in window&&!t?e.Utility.BrowserTypeEnum.Chrome:"documentMode"in document?e.Utility.BrowserTypeEnum.IE:void 0},t.SetCookie=function(e,t){if(this.USE_COOKIES){var n=new Date;n.setTime(n.getTime()+24*this.COOKIE_EXPIRATION_DAYS*60*60*1e3),Cookies.set(e,t,{expires:n})}},t.GetProfileId=function(){return encodeURIComponent(Cookies.get("eSupportProfile"))},t.GetSessionId=function(){if(_lsbSessionId)return _lsbSessionId;var e=new XMLHttpRequest;return e.open("GET",l.UrlUtility.getFullServicesPath("/Lsb/GetSessionId"),!1),e.onload=function(t){_lsbSessionId=e.responseText.substring(1,e.responseText.length-1)},e.send(null),_lsbSessionId},t.GetWebAPIBaseUrl=function(){return"undefined"!=typeof _webAPIUrl&&null!=_webAPIUrl&&""!==_webAPIUrl?(_webAPIUrl.toLocaleLowerCase().indexOf("session")<0&&(_webAPIUrl+="/V2.5/session"),_webAPIUrl):""},t.AddEventListener=function(t){e.Utility.EVENT_ARRAY.push(t)},t.RemoveEventListener=function(t,n){if(null!=n&&""!=n){var i=e.Utility.EVENT_ARRAY.filter((function(e){return e.EventType===t&&e.uniqueKey===n}));if(null!=i&&i.length>0){var a=-1;i.forEach((function(t){a=e.Utility.EVENT_ARRAY.indexOf(t),e.Utility.EVENT_ARRAY.splice(a)}))}}},t.Log=function(t){!0===e.Utility.ENABLE_LOG&&console.log(t+" "+(new Date).toTimeString())},t.USE_COOKIES=!0,t.COOKIE_EXPIRATION_DAYS=10,t.HTTP_REQUEST_INTERVAL=1e3,t.INIT_FINISHED=!1,t.EVENT_ARRAY=[],t.ENABLE_LOG=!1,t.LSB_CLIENT_VERSION="4.0.5.2",t}();e.Utility=t}(LSBV4||(LSBV4={})),function(e){!function(e){!function(e){e[e.Opera=0]="Opera",e[e.Firefox=1]="Firefox",e[e.Safari=2]="Safari",e[e.Chrome=3]="Chrome",e[e.IE=4]="IE"}(e.BrowserTypeEnum||(e.BrowserTypeEnum={})),function(e){e[e.Failed=0]="Failed",e[e.TimeOut=1]="TimeOut",e[e.InitNotFinished=2]="InitNotFinished"}(e.HttpRequestFailedTypeEnum||(e.HttpRequestFailedTypeEnum={})),function(e){e[e.NoEvent=0]="NoEvent",e[e.NeedUpdateLsb=1]="NeedUpdateLsb",e[e.LSBUpdateFailed=2]="LSBUpdateFailed",e[e.LSBUpdateSuccess=3]="LSBUpdateSuccess",e[e.PingFailed=4]="PingFailed",e[e.PingSuccess=5]="PingSuccess",e[e.NotLenovo=6]="NotLenovo",e[e.Waiting=7]="Waiting",e[e.SystemNotSupport=8]="SystemNotSupport",e[e.UnhandledException=9]="UnhandledException",e[e.WrongRequest=10]="WrongRequest",e[e.UserCancelled=11]="UserCancelled",e[e.CommandFinished=12]="CommandFinished",e[e.RedirectSuccess=13]="RedirectSuccess",e[e.RedirectFailed=14]="RedirectFailed",e[e.DetectSuccess=15]="DetectSuccess",e[e.DetectFailed=16]="DetectFailed",e[e.ADUPSuccess=17]="ADUPSuccess",e[e.ADUPFailed=18]="ADUPFailed",e[e.ADUPStatusSuccess=19]="ADUPStatusSuccess",e[e.ADUPStatusFinish=20]="ADUPStatusFinish",e[e.ADUPCancelSuccess=21]="ADUPCancelSuccess",e[e.ADUPCancelFailed=22]="ADUPCancelFailed",e[e.ADUPInstallPackageFailed=23]="ADUPInstallPackageFailed",e[e.ADUPInstallConfirmNo=24]="ADUPInstallConfirmNo",e[e.ADUPInstallStatus=25]="ADUPInstallStatus",e[e.ADUPInstallPackageProcessFinished=26]="ADUPInstallPackageProcessFinished",e[e.NoTVSU=27]="NoTVSU",e[e.ErrorLaunchTVSU=28]="ErrorLaunchTVSU",e[e.ErrorDownloadTVSU=29]="ErrorDownloadTVSU",e[e.LowVersion=30]="LowVersion",e[e.InstallTVSUSuccess=31]="InstallTVSUSuccess",e[e.InstallTVSUFailed=32]="InstallTVSUFailed",e[e.InstallTVSUInstalling=33]="InstallTVSUInstalling",e[e.InstallTVSUCancelled=34]="InstallTVSUCancelled",e[e.InstallTVSUCancelFailed=35]="InstallTVSUCancelFailed",e[e.DownloadTVSUStatus=36]="DownloadTVSUStatus",e[e.DownloadTVSUCancel=37]="DownloadTVSUCancel",e[e.DownloadTVSUCancelFailed=38]="DownloadTVSUCancelFailed",e[e.DownloadTVSUPause=39]="DownloadTVSUPause",e[e.DownloadTVSUError=40]="DownloadTVSUError",e[e.TVSUUpdateFailed=41]="TVSUUpdateFailed",e[e.ADUPDetectInfoSuccess=42]="ADUPDetectInfoSuccess",e[e.DiagSuccess=43]="DiagSuccess",e[e.DiagFailed=44]="DiagFailed",e[e.DiagStatusSuccess=45]="DiagStatusSuccess",e[e.DiagStatusFailed=46]="DiagStatusFailed",e[e.DiagCancelSuccess=47]="DiagCancelSuccess",e[e.DiagCancelFailed=48]="DiagCancelFailed",e[e.NoLSC=49]="NoLSC",e[e.ErrorLaunchLSC=50]="ErrorLaunchLSC",e[e.ErrorDownloadLSC=51]="ErrorDownloadLSC",e[e.LSCNotLaunch=52]="LSCNotLaunch",e[e.InstallLSCSuccess=53]="InstallLSCSuccess",e[e.InstallLSCFailed=54]="InstallLSCFailed",e[e.DownloadLSCStatus=55]="DownloadLSCStatus",e[e.DownloadLSCPause=56]="DownloadLSCPause",e[e.DownloadLSCError=57]="DownloadLSCError",e[e.DownloadLSCCancel=58]="DownloadLSCCancel",e[e.DownloadLSCCancelFailed=59]="DownloadLSCCancelFailed",e[e.InstallLSCCancelled=60]="InstallLSCCancelled",e[e.InstallLSCCancelFailed=61]="InstallLSCCancelFailed",e[e.InstallLSCInstalling=62]="InstallLSCInstalling",e[e.NoWebAPIData=63]="NoWebAPIData",e[e.WrongWebAPIData=64]="WrongWebAPIData",e[e.ModuleNotSupport=65]="ModuleNotSupport",e[e.DLMSuccess=66]="DLMSuccess",e[e.DLMFailed=67]="DLMFailed",e[e.DLMStatusSuccess=68]="DLMStatusSuccess",e[e.DLMCancelSuccess=69]="DLMCancelSuccess",e[e.DLMCancelFailed=70]="DLMCancelFailed",e[e.DLMPauseSuccess=71]="DLMPauseSuccess",e[e.DLMPauseFailed=72]="DLMPauseFailed",e[e.DLMResumeFailed=73]="DLMResumeFailed",e[e.DLMError=74]="DLMError",e[e.UserCancelSelectingLocation=75]="UserCancelSelectingLocation",e[e.NotEnoughDiskSpace=76]="NotEnoughDiskSpace",e[e.DLMCheckStatusSuccess=77]="DLMCheckStatusSuccess",e[e.OSDiagScanSuccess=78]="OSDiagScanSuccess",e[e.OSDiagScanFailed=79]="OSDiagScanFailed",e[e.OSDiagRunSuccess=80]="OSDiagRunSuccess",e[e.OSDiagRunFailed=81]="OSDiagRunFailed",e[e.OSDiagRunByIdSuccess=82]="OSDiagRunByIdSuccess",e[e.OSDiagRunByIdFailed=83]="OSDiagRunByIdFailed"}(e.EventTypeEnum||(e.EventTypeEnum={}));var t=function(){};e.EventHandler=t;var n=function(){this.FileId="",this.Url="",this.Name="",this.DSName="",this.Version="",this.Released=""};e.DownloadFilesInfo=n}(e.Utility||(e.Utility={}))}(LSBV4||(LSBV4={})),LSBV4.Utility.INIT_FINISHED||(LSBV4.Utility.INIT_FINISHED=!0),function(e){!function(t){var n=function(){};t.AbsstractOperation=n;var i=function(){function t(){this.Interval=null,this.Async=!0,this.SendFixedData=!1,this.SendDataWhenRequest=!1,this.RunWhenFailed=!1,this.SuccessEventType=e.Utility.EventTypeEnum.NoEvent,this.FailedEventType=e.Utility.EventTypeEnum.NoEvent,this.BranchVersion=0,this.NextBranchVersion=null}return t.prototype.GetRequestString=function(e){return e},t.prototype.SetLoopExecution=function(e,t){this._isLoopExecution=e,this._isLoopFinished=t},t.prototype.IsLoopExecution=function(){return this._isLoopExecution},t.prototype.IsLoopFinished=function(){return this._isLoopFinished},t}();t.AbstractOperationRequest=i}(e.Operation||(e.Operation={}))}(LSBV4||(LSBV4={}));var LSBV4,__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();!function(e){!function(t){var n,i=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e._retryCount=0,e}return __extends(i,t),i.prototype._httpRequestFailedHander=function(t,n,o){var r=null!=t.RetryTimes&&t.RetryTimes>=0?t.RetryTimes:!0===t.IsLocalCall?i.LOCAL_RETRY_TIMES:i.REMOTE_RETRY_TIMES,s=!0===t.IsLocalCall?!0===t.RetryInPeroid?i.INTERVAL_FOR_TIMEOUT:i.LOCAL_INTERVAL:i.REMOTE_INTERVAL;null==this._timeoutStartTime&&(this._timeoutStartTime=new Date);var u=new Date,l=Number(u)-Number(this._timeoutStartTime);if(!0===t.RetryInPeroid&&l<i.TIMEOUT||!0!==t.RetryInPeroid&&this._retryCount<r)if(null==t.CustomRetryStop||null!=t.CustomRetryStop&&!0!==t.CustomRetryStop()){if(!0===t.RetryInPeroid?e.Utility.Log("Retry. In: "+l.toString()):e.Utility.Log("Retry. Count: "+this._retryCount.toString()),!0===t.IsLocalCall&&(-1===a.LAST_LOCAL_PORT_INDEX&&(a.LAST_LOCAL_PORT_INDEX=a.CURRENT_LOCAL_PORT_INDEX),a.MoveNextPort(),a.CURRENT_LOCAL_PORT_INDEX!==a.LAST_LOCAL_PORT_INDEX))return e.Utility.Log("Try next local port: "+a.GetLocalPort().toString()+"."),void setTimeout((function(e,n){e.CallCORSWithDeferredObj(t,n)}),i.LOCAL_PORTS_POLLING_INTERVAL,this,o);setTimeout((function(e,n){e.CallCORSWithDeferredObj(t,n)}),s,this,o),!0!==t.RetryInPeroid&&this._retryCount++}else this._retryCount=0,this._timeoutStartTime=null,a.LAST_LOCAL_PORT_INDEX=-1,e.Utility.Log("CORS cancelled."),o.resolve();else this._retryCount=0,this._timeoutStartTime=null,a.LAST_LOCAL_PORT_INDEX=-1,e.Utility.Log("CORS timeout."),o.rejectWith(n,[e.Utility.HttpRequestFailedTypeEnum.TimeOut])},i.prototype.CallCORSWithDeferredObj=function(t,i){var o=this,r=i,s=n[t.Method],u={};!0!==t.IsLocalCall&&t.Method===n.POST?(u[t.URLKey]=t.RequestData,u=JSON.stringify(u)):u=t.RequestData;var l=e.Utility.GetSessionId();$.ajax({cache:!1,crossDomain:!0,async:t.Async,timeout:t.Timeout,data:u,dataType:t.Method===n.GET?"JSON":"TEXT",headers:!0===t.IsLocalCall?{"Current-Version":e.Utility.LSB_CLIENT_VERSION,eSupport_SessionID_e:l}:{"Content-Type":"application/json",clientid:"DCwRT5NXQz9xJzYaDN9OcQ==","Cache-Control":"no-cache",eSupport_SessionID_e:l},method:s,url:t.GetRequestString(t.URLKey)}).done((function(n){null==n||""===n?"GET"!==s.toUpperCase()?(o._retryCount=0,o._timeoutStartTime=null,e.Utility.Log("Call web api (Not Get) success!"),!0===t.IsLocalCall&&(e.Utility.SetCookie("LSBLocalPort",a.CURRENT_LOCAL_PORT_INDEX.toString()),e.Utility.Log("Record new port index: "+Cookies.get("LSBLocalPort"))),r.resolve()):o._httpRequestFailedHander(t,n,r):(o._retryCount=0,o._timeoutStartTime=null,"object"==typeof n?r.resolve(n):r.resolve(JSON.parse(n)),e.Utility.Log("Call web api (Get) success!"))})).fail((function(n){!1===t.NoResponseCall?o._httpRequestFailedHander(t,n,r):(o._retryCount=0,o._timeoutStartTime=null,r.resolve(),e.Utility.Log("Call web api (Get) success!"))}))},i.prototype.Send=function(t){var n=$.Deferred();return null==t&&(e.Utility.Log("No request assigned"),n.reject()),this._retryCount=0,this._timeoutStartTime=null,this.CallCORSWithDeferredObj(t,n),n.promise()},i.GetSingleton=function(){return null==i.SINGLETON_OBJECT&&(i.SINGLETON_OBJECT=new i),i.SINGLETON_OBJECT},i.LOCAL_INTERVAL=1e3,i.INTERVAL_FOR_TIMEOUT=5e3,i.REMOTE_INTERVAL=5e3,i.LOCAL_RETRY_TIMES=1,i.REMOTE_RETRY_TIMES=10,i.TIMEOUT=6e5,i.LOCAL_PORTS_POLLING_INTERVAL=100,i}(t.AbsstractOperation);t.CORSOperation=i,function(e){e[e.GET=0]="GET",e[e.POST=1]="POST",e[e.DELETE=2]="DELETE"}(n=t.HTTPMethodEnum||(t.HTTPMethodEnum={}));var a=function(t){function i(e,n,i,a,o){void 0===o&&(o=!1);var r=t.call(this)||this;return r.IsLocalCall=!1,r.IsCustomCall=!1,r.RetryInPeroid=!1,r.Timeout=5e3,r.RetryTimes=null,r.NoResponseCall=!1,r.CustomRetryStop=null,r.Operation=a,r.Method=e,r.URLKey=n,r.SendDataWhenRequest=i,r.IsLocalCall=o,r.Interval=3e3,r}return __extends(i,t),i.prototype.GetRequestString=function(t){return!0===this.IsCustomCall?t:!0===this.IsLocalCall?"http://localhost:"+i.GetLocalPort().toString()+"/"+t+"?profile="+e.Utility.GetProfileId():this.Method===n.POST?e.Utility.GetWebAPIBaseUrl():e.Utility.GetWebAPIBaseUrl()+"?type="+t},i.GetLocalPort=function(){if(i.LOCAL_PORT_ARRAY.length<=0)return i.CURRENT_LOCAL_PORT_INDEX=-1,e.Utility.Log("Port number of localhost is not assigned"),-1;var t=!0;if(-1===i.CURRENT_LOCAL_PORT_INDEX){var n=Cookies.get("LSBLocalPort");if(null!=n&&""!==n){var a=Number(n);!1===isNaN(a)&&(i.CURRENT_LOCAL_PORT_INDEX=a,t=!1)}}else t=!1;return(i.CURRENT_LOCAL_PORT_INDEX>=i.LOCAL_PORT_ARRAY.length||i.CURRENT_LOCAL_PORT_INDEX<0)&&(i.CURRENT_LOCAL_PORT_INDEX=0,t=!0),!0===t&&(i.CURRENT_LOCAL_PORT_INDEX=0,e.Utility.SetCookie("LSBLocalPort",i.CURRENT_LOCAL_PORT_INDEX.toString()),e.Utility.Log("Record new port index: "+Cookies.get("LSBLocalPort"))),i.LOCAL_PORT_ARRAY[i.CURRENT_LOCAL_PORT_INDEX]},i.AddLocalPort=function(e){i.LOCAL_PORT_ARRAY.push(e)},i.GetLocalPortArrayLength=function(){return i.LOCAL_PORT_ARRAY.length},i.MoveNextPort=function(){i.CURRENT_LOCAL_PORT_INDEX++,i.CURRENT_LOCAL_PORT_INDEX>=i.LOCAL_PORT_ARRAY.length&&(i.CURRENT_LOCAL_PORT_INDEX=0)},i.LOCAL_PORT_ARRAY=[],i.CURRENT_LOCAL_PORT_INDEX=-1,i.LAST_LOCAL_PORT_INDEX=-1,i}(t.AbstractOperationRequest);t.HTTPRequest=a}(e.Operation||(e.Operation={}))}(LSBV4||(LSBV4={})),function(e){!function(t){var n=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.Send=function(t){var n=$.Deferred();return null==t&&(e.Utility.Log("No request assigned"),n.reject()),!0===t.action()?n.resolve():n.reject(),n.promise()},n.GetSingleton=function(){return null==n.SINGLETON_OBJECT&&(n.SINGLETON_OBJECT=new n),n.SINGLETON_OBJECT},n}(t.AbsstractOperation);t.CustomOperation=n;var i=function(e){function t(t,n){var i=e.call(this)||this;return i.Operation=n,i.action=t,i}return __extends(t,e),t}(t.AbstractOperationRequest);t.CustomOperationRequest=i}(e.Operation||(e.Operation={}))}(LSBV4||(LSBV4={})),function(e){!function(t){var n=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.Send=function(t){var n,s=$.Deferred(),u=(new Date).getTime().toString(),l=r.GetRequestString(u);null!=t&&""===l&&(e.Utility.Log("No request assigned"),s.reject()),n=!0===t.ToNewWindow?window.open(l,"_blank","top=0,left=0,width="+window.screen.availWidth+",height = "+(window.screen.availHeight-60)+",menubar=no"):window.open(l);var p=new o(i.HTTPPageReady,u,n,(function(e,n){var o=new a;o.MessageType=i.PostDataForHTTPPage,o.Data=t.RequestData,o.ID=n.ID,o.Action=t.RequestType,e.postMessage(o,"http://"+location.hostname+r.GetHTTPPagePort())}));e.Operation.RedirectOperation.AddWindowMessageHandler(p);var c=new o(i.HTTPPageFunctionFinished,u,null,(function(t,n){e.Operation.RedirectOperation.ClearWindowMessageHandlerById(n.ID),null==n.Data?s.resolve():s.resolve(n.Data)}));e.Operation.RedirectOperation.AddWindowMessageHandler(c);var m=new o(i.HTTPPageClosed,u,null,(function(t,n){e.Utility.Log("User Cancelled"),e.Operation.RedirectOperation.ClearWindowMessageHandlerById(n.ID),s.reject({NoLSBAndCancelled:!0})}));return e.Operation.RedirectOperation.AddWindowMessageHandler(m),s.promise()},n._HandleWindowMessage=function(e){var t=this.GetWindowMessageHandler(e.MessageType,e.ID);null!=t&&t.Handler(t.TargetWindow,e)},n.ClearWindowMessageHandlerById=function(e){var t=this,n=this._windowMessageHandler.filter((function(t){return t.Message.ID===e}));null!=n&&n.length>0&&n.forEach((function(e){var n=t._windowMessageHandler.indexOf(e);t._windowMessageHandler.splice(n,1)}))},n.GetSingleton=function(){return null==n.SINGLETON_OBJECT&&(n.SINGLETON_OBJECT=new n),n.SINGLETON_OBJECT},n.ValidateMessageOrigin=function(e){if(null!=e&&""!==e){var t=document.createElement("a");t.href=e;var i=this.IsLSBPage()?n.GetRedirectPageParam("protocol"):"http";return t.hostname.toUpperCase()===location.hostname.toUpperCase()&&t.protocol.toUpperCase().replace(":","")===i.toUpperCase()}return!1},n.InitWindowMessageLisenter=function(){var t=this;window.addEventListener("message",(function(n){t.ValidateMessageOrigin(n.origin);if(!0===t.ValidateMessageOrigin(n.origin)){if(null!=n.data){e.Utility.Log(JSON.stringify(n));var a=n.data;switch(a.MessageType){case i.HTTPPageReady:e.Utility.Log("HTTPPageReady message received"),t._HandleWindowMessage(a);break;case i.HTTPPageFunctionFinished:e.Utility.Log("HTTPPageFunctionFinished message received"),t._HandleWindowMessage(a);break;case i.HTTPPageClosed:e.Utility.Log("HTTPPageClosed message received"),t._HandleWindowMessage(a);break;case i.PostDataForHTTPPage:e.Utility.Log("PostDataForHTTPPage message received"),e.Operation.RedirectOperation.LoadRedirectPage(!1,a.Action,a.Data);break;default:e.Utility.Log("Invalid window post message type")}}}else e.Utility.Log("Invalid message origin, expected:"+n.origin)}))},n.AddWindowMessageHandler=function(e){var t=this,n=this._windowMessageHandler.filter((function(t){return t.Message.MessageType===e.Message.MessageType&&t.Message.ID===e.Message.ID}));null!=n&&n.length>0&&n.forEach((function(e){var n=t._windowMessageHandler.indexOf(e);t._windowMessageHandler.splice(n,1)})),this._windowMessageHandler.push(e)},n.GetWindowMessageHandler=function(e,t){var n=this,i=this._windowMessageHandler.filter((function(n){return n.Message.MessageType===e&&n.Message.ID===t}));if(null!=i&&i.length>0){var a=i[0];return i.forEach((function(e){var t=n._windowMessageHandler.indexOf(e);n._windowMessageHandler.splice(t,1)})),a}return null},n.IsLSBPage=function(){var e=location.pathname.toUpperCase(),t=r.GetHTTPPagePath().toUpperCase();return-1!==e.indexOf(t,e.length-t.length)},n.GetRedirectPageParam=function(e){e=e.toUpperCase();var t=decodeURIComponent(location.search.trim().replace("?","")),n=r.GetHTTPPagePath().toUpperCase(),i=location.pathname.toUpperCase();if(-1!==i.indexOf(n,i.length-n.length)&&null!=t&&""!=t){var a=t.split("&");if(null!=a&&a.length>0)for(var o=0;o<a.length;o++){var s=a[o].indexOf("=");if(s>=0&&e===a[o].substring(0,s).toUpperCase())return a[o].substring(s+1)}}return""},n.LoadRedirectPage=function(t,n,i){void 0===t&&(t=!0),this.PageAction=n,this.PageData=i;var a=e.Dispatcher.GetDispatcher();switch(n){case e.Operation.RedirectRequestActionEnum.Detect:a.ExecCommand(e.Component.ComponentTypeEnum.DetectForHTTPPage,!0===t?e.Component.CommandTypeEnum.ContinuousScan:e.Component.CommandTypeEnum.Scan);break;case e.Operation.RedirectRequestActionEnum.DLMStart:if(null==i)return void e.Utility.Log("No install information found");a.ExecCommand(e.Component.ComponentTypeEnum.DLMForHTTPPage,!0===t?e.Component.CommandTypeEnum.ContinuousScan:e.Component.CommandTypeEnum.Scan,i);break;case e.Operation.RedirectRequestActionEnum.DLMResume:a.ExecCommand(e.Component.ComponentTypeEnum.DLMForHTTPPage,!0===t?e.Component.CommandTypeEnum.ContinuousScanResume:e.Component.CommandTypeEnum.ScanResume);break;case e.Operation.RedirectRequestActionEnum.ADUPStart:a.ExecCommand(e.Component.ComponentTypeEnum.ADUPForHTTPPage,!0===t?e.Component.CommandTypeEnum.ContinuousScan:e.Component.CommandTypeEnum.Scan);break;case e.Operation.RedirectRequestActionEnum.ADUPInstall:if(null==i)return void e.Utility.Log("No install information found");a.ExecCommand(e.Component.ComponentTypeEnum.ADUPForHTTPPage,!0===t?e.Component.CommandTypeEnum.ContinuousInstallPackage:e.Component.CommandTypeEnum.InstallPackage,i);break;case e.Operation.RedirectRequestActionEnum.OSDiagScan:a.ExecCommand(e.Component.ComponentTypeEnum.OSDiagForHTTPPage,!0===t?e.Component.CommandTypeEnum.ContinuousScan:e.Component.CommandTypeEnum.Scan);break;case e.Operation.RedirectRequestActionEnum.OSDiagRun:if(null==i)return void e.Utility.Log("No install information found");a.ExecCommand(e.Component.ComponentTypeEnum.OSDiagForHTTPPage,!0===t?e.Component.CommandTypeEnum.ContinuousRun:e.Component.CommandTypeEnum.Run,i);break;case e.Operation.RedirectRequestActionEnum.OSDiagRunById:if(null==i)return void e.Utility.Log("No install information found");a.ExecCommand(e.Component.ComponentTypeEnum.OSDiagForHTTPPage,!0===t?e.Component.CommandTypeEnum.ContinuousRunById:e.Component.CommandTypeEnum.RunById,i);break;case e.Operation.RedirectRequestActionEnum.SysDiagStart:a.ExecCommand(e.Component.ComponentTypeEnum.SysDiagForHTTPPage,!0===t?e.Component.CommandTypeEnum.ContinuousScan:e.Component.CommandTypeEnum.Scan);break;case e.Operation.RedirectRequestActionEnum.ModuleBasedDiagStart:if(null==i)return void e.Utility.Log("No module information found");a.ExecCommand(e.Component.ComponentTypeEnum.SysDiagForHTTPPage,!0===t?e.Component.CommandTypeEnum.ContinuousRunById:e.Component.CommandTypeEnum.RunById,i);break;default:e.Utility.Log("Invalid page action")}},n._windowMessageHandler=[],n}(t.AbsstractOperation);t.RedirectOperation=n;var i,a=function(){};t.WindowMessageData=a,function(e){e[e.HTTPPageReady=0]="HTTPPageReady",e[e.HTTPPageClosed=1]="HTTPPageClosed",e[e.HTTPPageFunctionFinished=2]="HTTPPageFunctionFinished",e[e.PostDataForHTTPPage=3]="PostDataForHTTPPage"}(i=t.WindowMessageType||(t.WindowMessageType={}));var o=function(e,t,n,i){var o=new a;o.ID=t,o.MessageType=e,this.TargetWindow=n,this.Message=o,this.Handler=i};t.WindowMessageHandlerInfo=o;var r=function(t){function n(e,n,i){void 0===i&&(i=!1);var a=t.call(this)||this;return a.ToNewWindow=!1,a.Operation=n,a.RequestType=e,a.SendDataWhenRequest=i,a}return __extends(n,t),n.GetHTTPPageName=function(){return"lsbpagev4"},n.GetHTTPPagePath=function(){return"/"+this.GetHTTPPageName()},n.GetHTTPPagePort=function(){return"http:"===location.protocol?":"+location.port:"support.lenovo.com"===location.hostname.toLowerCase()?"":"debug.lenovo.com"===location.hostname.toLowerCase()?":8002":"testlsb.lenovo.com"===location.hostname.toLowerCase()?":54415":""},n.GetRequestString=function(t){var n="/"+l.CultureUtility.getCurrentCountry()+"/"+l.CultureUtility.getCurrentLanguage(),i=encodeURIComponent("id="+t+"&lsbPageName="+this.GetHTTPPageName()+"&protocol="+location.protocol.replace(":","")+"&port="+(""===location.port?"":":"+location.port)+"&sId="+e.Utility.GetSessionId()+"&lang="+n);return"http://"+location.hostname+this.GetHTTPPagePort()+this.GetHTTPPagePath()+"?"+i},n}(t.AbstractOperationRequest);t.RedirectRequest=r,function(e){e[e.Detect=0]="Detect",e[e.DLMStart=1]="DLMStart",e[e.DLMResume=2]="DLMResume",e[e.ADUPStart=3]="ADUPStart",e[e.ADUPInstall=4]="ADUPInstall",e[e.OSDiagScan=5]="OSDiagScan",e[e.OSDiagRun=6]="OSDiagRun",e[e.OSDiagRunById=7]="OSDiagRunById",e[e.SysDiagStart=8]="SysDiagStart",e[e.ModuleBasedDiagStart=9]="ModuleBasedDiagStart"}(t.RedirectRequestActionEnum||(t.RedirectRequestActionEnum={}))}(e.Operation||(e.Operation={}))}(LSBV4||(LSBV4={})),function(e){!function(e){!function(e){e[e.Scan=0]="Scan",e[e.ContinuousScan=1]="ContinuousScan",e[e.ScanStatus=2]="ScanStatus",e[e.ScanCancel=3]="ScanCancel",e[e.ScanPause=4]="ScanPause",e[e.ScanResume=5]="ScanResume",e[e.ContinuousScanResume=6]="ContinuousScanResume",e[e.InstallPackage=7]="InstallPackage",e[e.ContinuousInstallPackage=8]="ContinuousInstallPackage",e[e.InstallApp=9]="InstallApp",e[e.InstallAppCancel=10]="InstallAppCancel",e[e.DownloadAppCancel=11]="DownloadAppCancel",e[e.Run=12]="Run",e[e.ContinuousRun=13]="ContinuousRun",e[e.RunById=14]="RunById",e[e.ContinuousRunById=15]="ContinuousRunById",e[e.CheckStatus=16]="CheckStatus",e[e.CheckLSBUpdateAndScan=17]="CheckLSBUpdateAndScan",e[e.CancelWithOutCommunication=18]="CancelWithOutCommunication",e[e.ScanStatusForVA=19]="ScanStatusForVA"}(e.CommandTypeEnum||(e.CommandTypeEnum={}))}(e.Component||(e.Component={}))}(LSBV4||(LSBV4={})),function(e){!function(e){var t=function(e,t,n){this.IsExclusive=!1,this.CommandType=e,this.OperationRequests=t,this.IsExclusive=n};e.Command=t}(e.Component||(e.Component={}))}(LSBV4||(LSBV4={})),function(e){!function(e){!function(e){e[e.Detect=0]="Detect",e[e.DetectForHTTPPage=1]="DetectForHTTPPage",e[e.ADUP=2]="ADUP",e[e.ADUPForHTTPPage=3]="ADUPForHTTPPage",e[e.SysDiag=4]="SysDiag",e[e.SysDiagForHTTPPage=5]="SysDiagForHTTPPage",e[e.OSDiag=6]="OSDiag",e[e.OSDiagForHTTPPage=7]="OSDiagForHTTPPage",e[e.DLM=8]="DLM",e[e.DLMForHTTPPage=9]="DLMForHTTPPage",e[e.LSBInstall=10]="LSBInstall"}(e.ComponentTypeEnum||(e.ComponentTypeEnum={}))}(e.Component||(e.Component={}))}(LSBV4||(LSBV4={})),function(e){!function(t){var n=function(){function t(e){this._isRunning=!1,this._commands=[],this._componentType=e}return t.prototype._runNextOperation=function(t,n,i,a,o,r){var s=this;if(!1===t.Async)this._runOperationsWithDeferredObj(n,i,a,o,r);else{var u=null==t.Interval?e.Utility.HTTP_REQUEST_INTERVAL:t.Interval;setTimeout((function(){s._runOperationsWithDeferredObj(n,i,a,o,r)}),u)}},t.prototype._runOperationsWithDeferredObj=function(t,n,i,a,o){var r=this,s=t[a];!0===s.SendDataWhenRequest&&!1===s.SendFixedData&&(s.RequestData=i),s.Operation.Send(s).done((function(u){if(null==s.DataHandler||!0===s.DataHandler(o,u)){var l=null==s.NextBranchVersion?s.BranchVersion:s.NextBranchVersion;if(l!==s.BranchVersion&&e.Utility.Log("Branch version switch to "+l),s.BranchVersion===l&&!0===s.IsLoopExecution()&&null!=s.IsLoopFinished()&&!1===s.IsLoopFinished()(u))r.TriggerEvent(s.SuccessEventType,o,u),r._runNextOperation(s,t,n,i,a,o);else for(r.TriggerEvent(s.SuccessEventType,o,u),a++;a<=t.length;){if(a===t.length){n.resolve();break}if(t[a].BranchVersion===l){r._runNextOperation(s,t,n,i,a,o);break}a++}}else n.reject()})).fail((function(t){null!=t&&null!=t.NoLSBAndCancelled&&!0===t.NoLSBAndCancelled?r.TriggerEvent(e.Utility.EventTypeEnum.UserCancelled,o,t):r.TriggerEvent(s.FailedEventType,o,t),n.reject()}))},t.prototype._runOperations=function(e,t,n,i){var a=$.Deferred();return null!=e&&e.length>0?this._runOperationsWithDeferredObj(e,a,t,n,i):a.resolve(),a.promise()},t.prototype._checkExclusive=function(){return!0===this._isRunning&&(e.Utility.Log("Execution is running, ignore duplicated exec"),!0)},t.prototype.IsRunning=function(){return this._isRunning},t.prototype.GetComponentType=function(){return this._componentType},t.prototype.TriggerEvent=function(n,i,a){var o=t._noNeedUniqueKeyEvent.some((function(e){return e===n}));if((!0===o||null!=i&&""!=i)&&n!==e.Utility.EventTypeEnum.NoEvent&&null!=e.Utility.EVENT_ARRAY&&e.Utility.EVENT_ARRAY.length>0){e.Utility.Log("Event: "+e.Utility.EventTypeEnum[n]+" triggered");var r=e.Utility.EVENT_ARRAY.filter((function(e){return e.EventType===n&&(!0===o||e.uniqueKey===i)}));null!=r&&r.length>0&&(r.forEach((function(e,t){setTimeout((function(){e.EventHandler(a,e.EventType)}))})),setTimeout((function(){e.Utility.LAST_EVENT_TYPE=n})))}},t.prototype.RegisterCommand=function(t){!0!==this._commands.some((function(e){return e.CommandType===t.CommandType}))?this._commands.push(t):e.Utility.Log("Register command failed, command with type "+e.Component.CommandTypeEnum[t.CommandType]+" has been registered, the old one will be overwritten")},t.prototype.ExecCommand=function(t,n,i){var a=this;if(void 0===i&&(i=null),null!=this._commands&&this._commands.length>0&&null!=n&&""!=n){var o=this._commands.filter((function(e){return e.CommandType===t}));if(null!=o&&o.length>0){var r=o[0];if(!0===r.IsExclusive){if(!0===this._checkExclusive())return;this._isRunning=!0}r.OperationRequests.forEach((function(e){e.NextBranchVersion=null})),this._runOperations(r.OperationRequests,i,0,n).always((function(){!0===r.IsExclusive&&(a._isRunning=!1),a.TriggerEvent(e.Utility.EventTypeEnum.CommandFinished,n,{CommandType:t})})).fail((function(){var e=r.OperationRequests.filter((function(e){return!0===e.RunWhenFailed}));null!=e&&e.length>0&&a._runOperations(e,null,0,n)}))}else e.Utility.Log("Exec command failed, command with type "+e.Component.CommandTypeEnum[t]+" is not registered")}},t.RegisterIgnoreUniqueKeyEvent=function(e){this._noNeedUniqueKeyEvent.push(e)},t._noNeedUniqueKeyEvent=[],t}();t.AbstractComponent=n}(e.Component||(e.Component={}))}(LSBV4||(LSBV4={})),function(e){!function(t){var n=function(t){function n(n){var i=t.call(this,n)||this;return i._redirectOperation=e.Operation.RedirectOperation.GetSingleton(),i._corsOperation=e.Operation.CORSOperation.GetSingleton(),i._initScanCommand(),i._initContinuousScanCommand(),i._initInstallPackageCommand(),i._initContinuousInstallPackageCommand(),i}return __extends(n,t),n.prototype._initScanCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"Adup2",!1,this._corsOperation,!0);n.Timeout=5e3,n.SuccessEventType=e.Utility.EventTypeEnum.RedirectSuccess,n.FailedEventType=e.Utility.EventTypeEnum.RedirectFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.Scan,t,!0);this.RegisterCommand(i)},n.prototype._initContinuousScanCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"Adup2",!1,this._corsOperation,!0);n.Timeout=5e3,n.RetryInPeroid=!0,n.SuccessEventType=e.Utility.EventTypeEnum.RedirectSuccess,n.FailedEventType=e.Utility.EventTypeEnum.RedirectFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.ContinuousScan,t,!0);this.RegisterCommand(i)},n.prototype._initInstallPackageCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"AdupInstall",!0,this._corsOperation,!0);n.Timeout=5e3,n.SuccessEventType=e.Utility.EventTypeEnum.RedirectSuccess,n.FailedEventType=e.Utility.EventTypeEnum.RedirectFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.InstallPackage,t,!0);this.RegisterCommand(i)},n.prototype._initContinuousInstallPackageCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"AdupInstall",!0,this._corsOperation,!0);n.Timeout=5e3,n.RetryInPeroid=!0,n.SuccessEventType=e.Utility.EventTypeEnum.RedirectSuccess,n.FailedEventType=e.Utility.EventTypeEnum.RedirectFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.ContinuousInstallPackage,t,!0);this.RegisterCommand(i)},n}(t.AbstractComponent);t.ADUPForHTTPPageV4=n}(e.Component||(e.Component={}))}(LSBV4||(LSBV4={})),function(e){!function(t){var n=function(n){function i(t){var i=n.call(this,t)||this;return i._redirectOperation=e.Operation.RedirectOperation.GetSingleton(),i._corsOperation=e.Operation.CORSOperation.GetSingleton(),i._customOperation=e.Operation.CustomOperation.GetSingleton(),i._tvsuUrl="",i._tvsuFileId="",i._tvsuVersion="",i._initScanStatusCommand(),i._initCancelScanCommand(),i._initInstallPackageCommand(),i._initInstallTVSUCommand(),i._initCancelInstallTVSUCommand(),i}return __extends(i,n),i.prototype._dlmCommonExceptionDataHander=function(n,i,a){switch(n.Exception){case t.DLMExceptionEnum.UserCancelSelectingLocation:return i.TriggerEvent(e.Utility.EventTypeEnum.UserCancelSelectingLocation,a,n),!1;case t.DLMExceptionEnum.NotEnoughDiskSpace:return i.TriggerEvent(e.Utility.EventTypeEnum.NotEnoughDiskSpace,a,n),!1;case t.DLMExceptionEnum.UnhandledException:return i.TriggerEvent(e.Utility.EventTypeEnum.UnhandledException,a,n),!1;case t.DLMExceptionEnum.WrongRequest:return i.TriggerEvent(e.Utility.EventTypeEnum.WrongRequest,a,n),!1;default:return!0}},i.prototype._scanStatusLoopHandler=function(e){var n=e.Data;if(null!=n&&n.length>0){var a=parseInt(n[0].status),o=parseInt(e.Exception);return!0===i._isCancelled||null!=o&&o!==t.DLMExceptionEnum.None||null!=a&&(a===t.DownloadStatus.Canceled||a===t.DownloadStatus.Completed||a===t.DownloadStatus.Paused||a===t.DownloadStatus.Canceled)}return!1},i.prototype._scanStatusHandler=function(n,i,a,o,r){if(!0!==this._dlmCommonExceptionDataHander(n,i,a))return!1;if("ADUP"===(null==n.Callback?"DLM":n.Callback.trim())&&null!=n.Data){var s=n.Data;if(null!=s&&s.length>0){var u=parseInt(s[0].status);if(null!=u)switch(u){case t.DownloadStatus.Downloading:i.TriggerEvent(e.Utility.EventTypeEnum.DownloadTVSUStatus,a,n);break;case t.DownloadStatus.Waiting:i.TriggerEvent(e.Utility.EventTypeEnum.Waiting,a,n);break;case t.DownloadStatus.Canceled:return i.TriggerEvent(e.Utility.EventTypeEnum.DownloadTVSUCancel,a,n),!1;case t.DownloadStatus.Completed:i.TriggerEvent(e.Utility.EventTypeEnum.DownloadTVSUStatus,a,n);break;case t.DownloadStatus.Paused:return i.TriggerEvent(e.Utility.EventTypeEnum.DownloadTVSUPause,a,n),!1;case t.DownloadStatus.Error:return i.TriggerEvent(e.Utility.EventTypeEnum.DownloadTVSUError,a,n),!1}}}return!0},i.prototype._adup2CommonExceptionDataHander=function(n,i){switch(parseInt(n.Exception)){case t.ADUPExceptionEnum.SystemNotSupport:return this.TriggerEvent(e.Utility.EventTypeEnum.SystemNotSupport,i,n),!1;case t.ADUPExceptionEnum.NoTVSU:return this.TriggerEvent(e.Utility.EventTypeEnum.NoTVSU,i,n),!1;case t.ADUPExceptionEnum.ErrorLaunchTVSU:return this.TriggerEvent(e.Utility.EventTypeEnum.ErrorLaunchTVSU,i,n),!1;case t.ADUPExceptionEnum.ErrorDownloadTVSU:return this.TriggerEvent(e.Utility.EventTypeEnum.ErrorDownloadTVSU,i,n),!1;case t.ADUPExceptionEnum.UnhandledException:return this.TriggerEvent(e.Utility.EventTypeEnum.UnhandledException,i,n),!1;case t.ADUPExceptionEnum.WrongRequest:return this.TriggerEvent(e.Utility.EventTypeEnum.WrongRequest,i,n),!1;case t.ADUPExceptionEnum.NotLenovo:return this.TriggerEvent(e.Utility.EventTypeEnum.NotLenovo,i,n),!1;case t.ADUPExceptionEnum.LowVersion:return this.TriggerEvent(e.Utility.EventTypeEnum.LowVersion,i,n),!1;case t.ADUPExceptionEnum.ErrorInstallTVSU:return this.TriggerEvent(e.Utility.EventTypeEnum.InstallTVSUFailed,i,n),!1;case t.ADUPExceptionEnum.None:case t.ADUPExceptionEnum.Waiting:return!0;default:return e.Utility.Log("Unexpected exception"),!1}},i.prototype._initScanStatusCommand=function(){var n=this,a=[],o=new e.Operation.CustomOperationRequest((function(){return i._isCancelled=!1,!0}),this._customOperation);o.FailedEventType=e.Utility.EventTypeEnum.ADUPFailed,a.push(o);var r=new e.Operation.CustomOperationRequest((function(){return!0!==i._isCancelled}),this._customOperation);a.push(r);var s=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"adup/doupdate",!1,this._corsOperation,!0);s.DataHandler=function(i,a){switch(parseInt(a.Exception)){case t.ADUPExceptionEnum.None:return null==a.Progress?n.TriggerEvent(e.Utility.EventTypeEnum.Waiting,i,a):n.TriggerEvent(e.Utility.EventTypeEnum.ADUPStatusSuccess,i,a),!0;case t.ADUPExceptionEnum.Waiting:return n.TriggerEvent(e.Utility.EventTypeEnum.Waiting,i,a),!0;default:return n._adup2CommonExceptionDataHander(a,i)}},s.FailedEventType=e.Utility.EventTypeEnum.ADUPFailed,a.push(s);var u=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"adup/scanningstatus",!1,this._corsOperation,!0);u.SetLoopExecution(!0,(function(e){var n=parseInt(e.Exception),a=parseInt(e.Progress);return n!==t.ADUPExceptionEnum.None&&n!==t.ADUPExceptionEnum.Waiting||100===a||a<0||!0===i._isCancelled})),u.DataHandler=function(a,o){if(!0===n._adup2CommonExceptionDataHander(o,a)){if(!0===i._isCancelled)n.TriggerEvent(e.Utility.EventTypeEnum.ADUPCancelSuccess,a,o);else switch(o.Exception){case t.ADUPExceptionEnum.None:return null==o.Progress?n.TriggerEvent(e.Utility.EventTypeEnum.Waiting,a,o):n.TriggerEvent(e.Utility.EventTypeEnum.ADUPStatusSuccess,a,o),!0;case t.ADUPExceptionEnum.Waiting:return n.TriggerEvent(e.Utility.EventTypeEnum.Waiting,a,o),!0}return!0}return!1},u.FailedEventType=e.Utility.EventTypeEnum.ADUPFailed,a.push(u);var l=new e.Component.Command(e.Component.CommandTypeEnum.ScanStatus,a,!0);this.RegisterCommand(l)},i.prototype._initCancelScanCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"adup/adupcancelscan",!1,this._corsOperation,!0);n.NoResponseCall=!0,n.FailedEventType=e.Utility.EventTypeEnum.ADUPCancelFailed,t.push(n);var a=new e.Operation.CustomOperationRequest((function(){return i._isCancelled=!0,!0}),this._customOperation);a.FailedEventType=e.Utility.EventTypeEnum.ADUPCancelFailed,t.push(a);var o=new e.Component.Command(e.Component.CommandTypeEnum.ScanCancel,t,!1);this.RegisterCommand(o)},i.prototype._initInstallPackageCommand=function(){var n=this,a=[],o=new e.Operation.CustomOperationRequest((function(){return i._isCancelled=!1,!0}),this._customOperation);o.FailedEventType=e.Utility.EventTypeEnum.ADUPInstallPackageFailed,a.push(o);var r=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"adup/installpackages",!0,this._corsOperation,!0);r.FailedEventType=e.Utility.EventTypeEnum.ADUPInstallPackageFailed,a.push(r);var s=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"adup/checkconfirmation",!1,this._corsOperation,!0);s.Interval=2e3,s.SetLoopExecution(!0,(function(e){var n=parseInt(e.Exception);return null!=n&&n!==t.ADUPExceptionEnum.None&&n!==t.ADUPExceptionEnum.Waiting||null!=e.Confirmation&&"Wait"!==e.Confirmation})),s.DataHandler=function(t,a){return!0===n._adup2CommonExceptionDataHander(a,t)&&("No"===a.Confirmation&&(i._isCancelled=!0,n.TriggerEvent(e.Utility.EventTypeEnum.ADUPInstallConfirmNo,t,a)),!0)},s.FailedEventType=e.Utility.EventTypeEnum.ADUPInstallPackageFailed,a.push(s);var u=new e.Operation.CustomOperationRequest((function(){return!i._isCancelled}),this._customOperation);a.push(u);var l=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"adup/installstatus",!1,this._corsOperation,!0);l.SetLoopExecution(!0,(function(e){var n=parseInt(e.Exception),i=parseInt(e.Action);return null!=n&&n!==t.ADUPExceptionEnum.None&&n!==t.ADUPExceptionEnum.Waiting||null!=n&&n===t.ADUPExceptionEnum.None&&null!=i&&i===t.InstallPackageActionEnum.Done})),l.DataHandler=function(t,i){return!0===n._adup2CommonExceptionDataHander(i,t)&&(n.TriggerEvent(e.Utility.EventTypeEnum.ADUPInstallStatus,t,i),!0)},l.FailedEventType=e.Utility.EventTypeEnum.ADUPInstallPackageFailed,a.push(l);var p=new e.Component.Command(e.Component.CommandTypeEnum.InstallPackage,a,!0);this.RegisterCommand(p)},i.prototype._initInstallTVSUCommand=function(){var n=this,a=[],o=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"adup/installsu",!0,this._corsOperation,!0);o.SendFixedData=!0,this._tvsuUrl="https://download.lenovo.com/pccbbs/thinkvantage_en/systemupdate5.07.0042.exe",this._tvsuFileId="tvsu",this._tvsuVersion="5.07.0042";var r=[],s=new e.Utility.DownloadFilesInfo;s.FileId=this._tvsuFileId,s.Name=this._tvsuUrl.substring(this._tvsuUrl.lastIndexOf("/")+1,this._tvsuUrl.length),s.DSName="TVSU",s.Url=this._tvsuUrl,s.Version=this._tvsuVersion,r.push(s),o.RequestData=JSON.stringify(r),o.FailedEventType=e.Utility.EventTypeEnum.InstallTVSUFailed,a.push(o);var u=new e.Operation.CustomOperationRequest((function(){return i._isCancelled=!1,!0}),this._customOperation);u.FailedEventType=e.Utility.EventTypeEnum.InstallTVSUFailed,a.push(u);var l=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"adup/downloadstatus",!1,this._corsOperation,!0);l.SetLoopExecution(!0,(function(e){return n._scanStatusLoopHandler(e)})),l.DataHandler=function(e,t){return n._scanStatusHandler(t,n,e)},l.FailedEventType=e.Utility.EventTypeEnum.InstallTVSUFailed,a.push(l);var p=new e.Operation.CustomOperationRequest((function(){return i._isCancelled=!1,!0}),this._customOperation);p.FailedEventType=e.Utility.EventTypeEnum.ADUPFailed,a.push(p);var c=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"adup/scanningstatus",!1,this._corsOperation,!0);c.SetLoopExecution(!0,(function(e){var n=parseInt(e.Exception),a=parseInt(e.Progress);return n!==t.ADUPExceptionEnum.None&&n!==t.ADUPExceptionEnum.Waiting||100===a||a<0||!0===i._isCancelled})),c.DataHandler=function(a,o){if(!0===n._adup2CommonExceptionDataHander(o,a)){if(!0===i._isCancelled)n.TriggerEvent(e.Utility.EventTypeEnum.ADUPCancelSuccess,a,o);else switch(o.Exception){case t.ADUPExceptionEnum.None:return null==o.Progress?n.TriggerEvent(e.Utility.EventTypeEnum.Waiting,a,o):n.TriggerEvent(e.Utility.EventTypeEnum.ADUPStatusSuccess,a,o),!0;case t.ADUPExceptionEnum.Waiting:return n.TriggerEvent(e.Utility.EventTypeEnum.Waiting,a,o),!0}return!0}return!1},c.FailedEventType=e.Utility.EventTypeEnum.ADUPFailed,a.push(c);var m=new e.Component.Command(e.Component.CommandTypeEnum.InstallApp,a,!0);this.RegisterCommand(m)},i.prototype._initCancelInstallTVSUCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"adup/cancelsudownload",!1,this._corsOperation,!0);n.NoResponseCall=!0,n.FailedEventType=e.Utility.EventTypeEnum.InstallTVSUCancelFailed,t.push(n);var a=new e.Operation.CustomOperationRequest((function(){return i._isCancelled=!0,!0}),this._customOperation);a.FailedEventType=e.Utility.EventTypeEnum.ADUPCancelFailed,t.push(a);var o=new e.Component.Command(e.Component.CommandTypeEnum.InstallAppCancel,t,!1);this.RegisterCommand(o)},i._isCancelled=!1,i.TVSU_DOWNLOAD_URL="https://download.lenovo.com/pccbbs/thinkvantage_en/systemupdate5.07.0042.exe",i}(t.AbstractComponent);t.ADUPV1=n}(e.Component||(e.Component={}))}(LSBV4||(LSBV4={})),function(e){!function(t){var n,i,a,o=function(o){function r(t){var n=o.call(this,t)||this;return n._redirectOperation=e.Operation.RedirectOperation.GetSingleton(),n._corsOperation=e.Operation.CORSOperation.GetSingleton(),n._customOperation=e.Operation.CustomOperation.GetSingleton(),n._tvsuUrl="",n._tvsuFileId="",n._tvsuVersion="",n._initScanStatusCommand(),n._initCancelScanCommand(),n._initInstallPackageCommand(),n._initInstallTVSUCommand(),n._initCancelInstallTVSUCommand(),n._initCancelInstallTVSUCommandAtStart(),n}return __extends(r,o),r.prototype._adup2CommonExceptionDataHander=function(t,n,a){var o=this;switch(t.Exception){case i.SystemNotSupport:return null==a?this.TriggerEvent(e.Utility.EventTypeEnum.SystemNotSupport,n,t):a.action=function(){return o.TriggerEvent(e.Utility.EventTypeEnum.SystemNotSupport,n,t),!0},!1;case i.NoTVSU:return null==a?this.TriggerEvent(e.Utility.EventTypeEnum.NoTVSU,n,t):a.action=function(){return o.TriggerEvent(e.Utility.EventTypeEnum.NoTVSU,n,t),!0},!1;case i.ErrorLaunchTVSU:return null==a?this.TriggerEvent(e.Utility.EventTypeEnum.ErrorLaunchTVSU,n,t):a.action=function(){return o.TriggerEvent(e.Utility.EventTypeEnum.ErrorLaunchTVSU,n,t),!0},!1;case i.ErrorDownloadTVSU:return null==a?this.TriggerEvent(e.Utility.EventTypeEnum.ErrorDownloadTVSU,n,t):a.action=function(){return o.TriggerEvent(e.Utility.EventTypeEnum.ErrorDownloadTVSU,n,t),!0},!1;case i.UnhandledException:return null==a?this.TriggerEvent(e.Utility.EventTypeEnum.UnhandledException,n,t):a.action=function(){return o.TriggerEvent(e.Utility.EventTypeEnum.UnhandledException,n,t),!0},!1;case i.WrongRequest:return null==a?this.TriggerEvent(e.Utility.EventTypeEnum.WrongRequest,n,t):a.action=function(){return o.TriggerEvent(e.Utility.EventTypeEnum.WrongRequest,n,t),!0},!1;case i.NotLenovo:return null==a?this.TriggerEvent(e.Utility.EventTypeEnum.NotLenovo,n,t):a.action=function(){return o.TriggerEvent(e.Utility.EventTypeEnum.NotLenovo,n,t),!0},!1;case i.LowVersion:return null==a?this.TriggerEvent(e.Utility.EventTypeEnum.LowVersion,n,t):a.action=function(){return o.TriggerEvent(e.Utility.EventTypeEnum.LowVersion,n,t),!0},!1;case i.TVSUUpdateFailed:return null==a?this.TriggerEvent(e.Utility.EventTypeEnum.TVSUUpdateFailed,n,t):a.action=function(){return o.TriggerEvent(e.Utility.EventTypeEnum.TVSUUpdateFailed,n,t),!0},!1;case i.None:case i.Waiting:return!0;default:return e.Utility.Log("Unexpected exception"),!1}},r.prototype._initScanStatusCommand=function(){var t=this,n=[],i=new e.Operation.RedirectRequest(e.Operation.RedirectRequestActionEnum.ADUPStart,this._redirectOperation);i.FailedEventType=e.Utility.EventTypeEnum.ADUPFailed,i.DataHandler=function(n,a){if(null!=a&&null!=a.returnCode&&3===a.returnCode)if(e.Utility.Log("Get progress status: "+a.progressStatus),null!=a.progressStatus)switch(a.progressStatus){case 1:i.NextBranchVersion=1;break;case 2:i.NextBranchVersion=2;break;case 4:i.NextBranchVersion=3;break;case 5:i.NextBranchVersion=4;break;case 6:i.NextBranchVersion=5;break;case 7:t.TriggerEvent(e.Utility.EventTypeEnum.NoTVSU,n,{Exception:e.Component.ADUPExceptionEnum.NoTVSU}),i.NextBranchVersion=6;break;default:e.Utility.Log("Unknow progress status: "+a.progressStatus)}else e.Utility.Log("No progress status: "+a.progressStatus);return!0},n.push(i);var a=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.DELETE,"AdupScanData~TvsuDlData~AdupInstallData~TVSUInstallData~AdupNxtCmd",!1,this._corsOperation);a.FailedEventType=e.Utility.EventTypeEnum.ADUPFailed,n.push(a),this._addDetectOperation(n),this._addADUPOperationToScanStatus(n),this._addScanOperation(n,e.Utility.EventTypeEnum.ADUPFailed),this._addDetectOperation(n,1),this._addADUPOperationToScanStatus(n,1),this._addScanOperation(n,e.Utility.EventTypeEnum.ADUPFailed,1),this._addDetectOperation(n,2),this._addScanOperation(n,e.Utility.EventTypeEnum.ADUPFailed,2),this._addDetectOperation(n,3),this._addDLOperationToInstallTVSU(n,3),this._addTVSUInstallOperationToInstallTVSU(n,3),this._addScanOperation(n,e.Utility.EventTypeEnum.ADUPFailed,3),this._addDetectOperation(n,4),this._addTVSUInstallOperationToInstallTVSU(n,4),this._addScanOperation(n,e.Utility.EventTypeEnum.ADUPFailed,4),this._addDetectOperation(n,5),this._addScanOperation(n,e.Utility.EventTypeEnum.ADUPFailed,5);var o=new e.Component.Command(e.Component.CommandTypeEnum.ScanStatus,n,!0);this.RegisterCommand(o)},r.prototype._addDetectOperation=function(n,i){var a=this;void 0===i&&(i=0);var o=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"ADUPDetectData",!1,this._corsOperation);o.RetryInPeroid=!0,o.BranchVersion=i,o.DataHandler=function(n,i){return i.Exception!==t.DetectExceptionEnum.None&&a.TriggerEvent(e.Utility.EventTypeEnum.NotLenovo,n,i),!0},o.SuccessEventType=e.Utility.EventTypeEnum.ADUPDetectInfoSuccess,o.FailedEventType=e.Utility.EventTypeEnum.ADUPFailed,n.push(o)},r.prototype._addADUPOperationToScanStatus=function(t,n){var a=this;void 0===n&&(n=0);var o=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"AdupData",!1,this._corsOperation);o.BranchVersion=n,o.RetryInPeroid=!0,o.DataHandler=function(t,n){switch(n.Exception){case i.None:return null==n.Progress?(a.TriggerEvent(e.Utility.EventTypeEnum.ADUPSuccess,t,n),a.TriggerEvent(e.Utility.EventTypeEnum.Waiting,t,n)):(a.TriggerEvent(e.Utility.EventTypeEnum.ADUPSuccess,t,n),a.TriggerEvent(e.Utility.EventTypeEnum.ADUPStatusSuccess,t,n)),!0;case i.Waiting:return a.TriggerEvent(e.Utility.EventTypeEnum.Waiting,t,n),!0;default:return a._adup2CommonExceptionDataHander(n,t)}},o.FailedEventType=e.Utility.EventTypeEnum.ADUPFailed,t.push(o)},r.prototype._addScanOperation=function(t,n,a){var o=this;void 0===a&&(a=0);var r=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"AdupScanData",!1,this._corsOperation);r.BranchVersion=a,r.SetLoopExecution(!0,(function(e){var t=e.Exception,n=e.Progress;return t!==i.None&&t!==i.Waiting||100===n||n<0||!0===e.IsCanceled})),r.DataHandler=function(t,n){if(!0===o._adup2CommonExceptionDataHander(n,t)){if(!0===n.IsCanceled)o.TriggerEvent(e.Utility.EventTypeEnum.ADUPCancelSuccess,t,n);else switch(n.Exception){case i.None:return null==n.Progress?o.TriggerEvent(e.Utility.EventTypeEnum.Waiting,t,n):o.TriggerEvent(e.Utility.EventTypeEnum.ADUPStatusSuccess,t,n),!0;case i.Waiting:return o.TriggerEvent(e.Utility.EventTypeEnum.Waiting,t,n),!0}return!0}return!1},r.FailedEventType=n,t.push(r);var s=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.DELETE,"AdupData~AdupScanData~TvsuDlData~AdupInstallData~TVSUInstallData~AdupNxtCmd",!1,this._corsOperation);s.BranchVersion=a,s.RunWhenFailed=!0,t.push(s);var u=new e.Operation.CustomOperationRequest((function(){return!0}),this._customOperation);u.RunWhenFailed=!0,u.BranchVersion=a,u.SuccessEventType=e.Utility.EventTypeEnum.ADUPStatusFinish,t.push(u)},r.prototype._initCancelScanCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"AdupNxtCmd",!0,this._corsOperation,!1);n.SendFixedData=!0,n.RequestData="AdupScanCancel",n.FailedEventType=e.Utility.EventTypeEnum.ADUPCancelFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.ScanCancel,t,!1);this.RegisterCommand(i)},r.prototype._initInstallPackageCommand=function(){var t=[],n=new e.Operation.CustomOperationRequest((function(){return!0}),this._customOperation);n.RunWhenFailed=!0,n.SuccessEventType=e.Utility.EventTypeEnum.ADUPInstallPackageProcessFinished,n.FailedEventType=e.Utility.EventTypeEnum.ADUPInstallPackageFailed;var i=new e.Operation.RedirectRequest(e.Operation.RedirectRequestActionEnum.ADUPInstall,this._redirectOperation,!0);i.DataHandler=function(t,n){if(null!=n&&null!=n.returnCode&&3===n.returnCode){if(null!=n.progressStatus)switch(n.progressStatus){case 3:i.NextBranchVersion=1;break;default:e.Utility.Log("Unknow progress status: "+n.progressStatus)}e.Utility.Log("No progress status: "+n.progressStatus)}return!0},i.FailedEventType=e.Utility.EventTypeEnum.ADUPInstallPackageFailed,t.push(i);var a=new e.Operation.CustomOperationRequest((function(){return n.action=function(){return!0},!0}),this._customOperation);a.FailedEventType=e.Utility.EventTypeEnum.ADUPInstallPackageFailed,t.push(a);var o=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.DELETE,"AdupNxtCmd",!1,this._corsOperation);o.FailedEventType=e.Utility.EventTypeEnum.ADUPInstallPackageFailed,t.push(o),this._addInstallStatusOperationToInstallPackage(t,0,n),this._addInstallStatusOperationToInstallPackage(t,1,n),t.push(n);var r=new e.Component.Command(e.Component.CommandTypeEnum.InstallPackage,t,!0);this.RegisterCommand(r)},r.prototype._addInstallStatusOperationToInstallPackage=function(t,n,o){var r=this;void 0===n&&(n=0);var s=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"AdupInstallData",!1,this._corsOperation);s.BranchVersion=n,s.RetryInPeroid=!0,s.SetLoopExecution(!0,(function(e){var t=e.Exception,n=e.Action;return null!=t&&t!==i.None&&t!==i.Waiting||null!=t&&t===i.None&&null!=n&&n===a.Done||null!=e.Confirmation&&"Yes"!==e.Confirmation&&"Wait"!==e.Confirmation})),s.DataHandler=function(t,n){return!0===r._adup2CommonExceptionDataHander(n,t,o)&&("No"===n.Confirmation?o.action=function(){return r.TriggerEvent(e.Utility.EventTypeEnum.ADUPInstallConfirmNo,t,n),!0}:"Yes"===n.Confirmation&&r.TriggerEvent(e.Utility.EventTypeEnum.ADUPInstallStatus,t,n),!0)},s.FailedEventType=e.Utility.EventTypeEnum.ADUPInstallPackageFailed,t.push(s);var u=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.DELETE,"AdupInstallData",!1,this._corsOperation);u.BranchVersion=n,u.RunWhenFailed=!0,t.push(u)},r.prototype._initInstallTVSUCommand=function(t,n){void 0===t&&(t=null),void 0===n&&(n=0);var i=null==t?[]:t,a=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.DELETE,"TvsuDlData~TVSUInstallData~AdupNxtCmd",!1,this._corsOperation);a.BranchVersion=n,a.FailedEventType=e.Utility.EventTypeEnum.InstallTVSUFailed,i.push(a);var o=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"TvsuDlData",!0,this._corsOperation);o.BranchVersion=n,o.SendFixedData=!0,this._tvsuUrl="https://download.lenovo.com/tvsupackage",this._tvsuFileId="tvsu",this._tvsuVersion="5.07.0070";var r=[],s=new e.Utility.DownloadFilesInfo;s.FileId=this._tvsuFileId,s.Name=this._tvsuUrl.substring(this._tvsuUrl.lastIndexOf("/")+1,this._tvsuUrl.length)+".exe",s.DSName="TVSU",s.Url=this._tvsuUrl,s.Version=this._tvsuVersion,r.push(s),o.RequestData=JSON.stringify(r),o.FailedEventType=e.Utility.EventTypeEnum.InstallTVSUFailed,i.push(o);var u=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"AdupNxtCmd",!0,this._corsOperation,!1);u.BranchVersion=n,u.SendFixedData=!0,u.RequestData="AdupInstTvsu",u.FailedEventType=e.Utility.EventTypeEnum.InstallTVSUFailed,i.push(u),this._addDLOperationToInstallTVSU(i,n),this._addTVSUInstallOperationToInstallTVSU(i,n),this._addScanOperation(i,e.Utility.EventTypeEnum.ADUPFailed,n);var l=new e.Component.Command(e.Component.CommandTypeEnum.InstallApp,i,!0);this.RegisterCommand(l)},r.prototype._addDLOperationToInstallTVSU=function(n,i){var a=this;void 0===i&&(i=0);var o=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"TvsuDlData",!1,this._corsOperation);o.BranchVersion=i,o.RetryInPeroid=!0,o.SetLoopExecution(!0,(function(e){return t.DLMInfrastructureLogic.ScanStatusLoopHandler(e)})),o.DataHandler=function(e,n){return t.DLMInfrastructureLogic.ScanStatusHandler(n,a,e)},o.FailedEventType=e.Utility.EventTypeEnum.InstallTVSUFailed,n.push(o)},r.prototype._addTVSUInstallOperationToInstallTVSU=function(t,i){var a=this;void 0===i&&(i=0);var o=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"TVSUInstallData",!1,this._corsOperation);o.BranchVersion=i,o.RetryInPeroid=!0,o.SetLoopExecution(!0,(function(e){return e.InstallStatus!==n.Installing})),o.DataHandler=function(t,i){switch(i.InstallStatus){case n.Installing:return a.TriggerEvent(e.Utility.EventTypeEnum.InstallTVSUInstalling,t,i),!0;case n.Complete:return a.TriggerEvent(e.Utility.EventTypeEnum.InstallTVSUSuccess,t,i),!0;case n.Canceled:return a.TriggerEvent(e.Utility.EventTypeEnum.InstallTVSUCancelled,t,i),!1;default:return!1}},o.FailedEventType=e.Utility.EventTypeEnum.InstallTVSUFailed,t.push(o)},r.prototype._initCancelInstallTVSUCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"AdupNxtCmd",!0,this._corsOperation,!1);n.SendFixedData=!0,n.RequestData="AdupInstTvsuCancel",n.FailedEventType=e.Utility.EventTypeEnum.InstallTVSUCancelFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.InstallAppCancel,t,!1);this.RegisterCommand(i)},r.prototype._initCancelInstallTVSUCommandAtStart=function(){var t=this,n=[],a=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"AdupNxtCmd",!0,this._corsOperation,!1);a.SendFixedData=!0,a.RequestData="AdupInstTvsuCancelAtStart",a.FailedEventType=e.Utility.EventTypeEnum.DownloadTVSUCancelFailed,n.push(a);var o=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"AdupScanData",!1,this._corsOperation);o.SetLoopExecution(!0,(function(e){var t=e.Exception,n=e.Progress;return t!==i.None&&t!==i.Waiting||100===n||n<0||!0===e.IsCanceled})),o.DataHandler=function(n,a){if(!0===t._adup2CommonExceptionDataHander(a,n)){if(!0===a.IsCanceled)t.TriggerEvent(e.Utility.EventTypeEnum.DownloadTVSUCancel,n,a);else switch(a.Exception){case i.None:return null==a.Progress?t.TriggerEvent(e.Utility.EventTypeEnum.Waiting,n,a):t.TriggerEvent(e.Utility.EventTypeEnum.ADUPStatusSuccess,n,a),!0;case i.Waiting:return t.TriggerEvent(e.Utility.EventTypeEnum.Waiting,n,a),!0}return!0}return!1},o.FailedEventType=e.Utility.EventTypeEnum.ADUPFailed,n.push(o);var r=new e.Component.Command(e.Component.CommandTypeEnum.DownloadAppCancel,n,!1);this.RegisterCommand(r)},r}(t.AbstractComponent);t.ADUPV4=o,function(e){e[e.Installing=0]="Installing",e[e.Complete=1]="Complete",e[e.Canceled=2]="Canceled"}(n=t.InstallAPPStatusEnum||(t.InstallAPPStatusEnum={})),function(e){e[e.None=0]="None",e[e.SystemNotSupport=1]="SystemNotSupport",e[e.NoTVSU=2]="NoTVSU",e[e.ErrorLaunchTVSU=3]="ErrorLaunchTVSU",e[e.ErrorDownloadTVSU=4]="ErrorDownloadTVSU",e[e.UnhandledException=5]="UnhandledException",e[e.WrongRequest=6]="WrongRequest",e[e.NotLenovo=7]="NotLenovo",e[e.LowVersion=8]="LowVersion",e[e.Waiting=9]="Waiting",e[e.TVSUUpdateFailed=10]="TVSUUpdateFailed",e[e.ErrorInstallTVSU=11]="ErrorInstallTVSU",e[e.CommunicationFailed=-1]="CommunicationFailed",e[e.UserCancelled=-2]="UserCancelled"}(i=t.ADUPExceptionEnum||(t.ADUPExceptionEnum={})),function(e){e[e.Downloading=0]="Downloading",e[e.Installing=1]="Installing",e[e.Done=2]="Done"}(a=t.InstallPackageActionEnum||(t.InstallPackageActionEnum={})),function(e){e[e.not_started=0]="not_started",e[e.downloading=1]="downloading",e[e.download_successful=2]="download_successful",e[e.download_fail=3]="download_fail",e[e.installing=4]="installing",e[e.install_successful=5]="install_successful",e[e.install_fail=6]="install_fail"}(t.InstallPackageStatusEnum||(t.InstallPackageStatusEnum={}))}(e.Component||(e.Component={}))}(LSBV4||(LSBV4={})),function(e){!function(t){var n=function(t){function n(n){var i=t.call(this,n)||this;return i._redirectOperation=e.Operation.RedirectOperation.GetSingleton(),i._corsOperation=e.Operation.CORSOperation.GetSingleton(),i._initScanCommand(),i._initContinuousScanCommand(),i._initScanResumeCommand(),i._initContinuousScanResumeCommand(),i}return __extends(n,t),n.prototype._initScanCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"DlmDownload",!0,this._corsOperation,!0);n.Timeout=5e3,n.SuccessEventType=e.Utility.EventTypeEnum.RedirectSuccess,n.FailedEventType=e.Utility.EventTypeEnum.RedirectFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.Scan,t,!0);this.RegisterCommand(i)},n.prototype._initContinuousScanCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"DlmDownload",!0,this._corsOperation,!0);n.Timeout=5e3,n.RetryInPeroid=!0,n.SuccessEventType=e.Utility.EventTypeEnum.RedirectSuccess,n.FailedEventType=e.Utility.EventTypeEnum.RedirectFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.ContinuousScan,t,!0);this.RegisterCommand(i)},n.prototype._initScanResumeCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"ResumeDlmDownload",!1,this._corsOperation,!0);n.Timeout=5e3,n.SuccessEventType=e.Utility.EventTypeEnum.RedirectSuccess,n.FailedEventType=e.Utility.EventTypeEnum.RedirectFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.ScanResume,t,!0);this.RegisterCommand(i)},n.prototype._initContinuousScanResumeCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"ResumeDlmDownload",!1,this._corsOperation,!0);n.Timeout=5e3,n.RetryInPeroid=!0,n.SuccessEventType=e.Utility.EventTypeEnum.RedirectSuccess,n.FailedEventType=e.Utility.EventTypeEnum.RedirectFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.ContinuousScanResume,t,!0);this.RegisterCommand(i)},n}(t.AbstractComponent);t.DLMForHTTPPageV4=n}(e.Component||(e.Component={}))}(LSBV4||(LSBV4={})),function(e){!function(t){var n=function(n){function i(i){var a=n.call(this,i)||this;return a._corsOperation=e.Operation.CORSOperation.GetSingleton(),a.workOutDataStatus=function(e){if(!1===e.Success)return t.DownloadStatus.Error;if(0===e.Data.length)return t.DownloadStatus.Canceled;var n=t.DownloadStatus.Downloading;if((n=e.Data.filter((function(e){return e.status===t.DownloadStatus.Completed||e.status===t.DownloadStatus.Error})).length===e.Data.length?t.DownloadStatus.Completed:t.DownloadStatus.Downloading)===t.DownloadStatus.Downloading){n=e.Data.filter((function(e){return e.status===t.DownloadStatus.Paused})).length>0?t.DownloadStatus.Paused:t.DownloadStatus.Downloading}if(n===t.DownloadStatus.Downloading){n=e.Data.filter((function(e){return e.status===t.DownloadStatus.Canceled||e.status===t.DownloadStatus.Canceling})).length>0?t.DownloadStatus.Canceled:t.DownloadStatus.Downloading}return n},a._initScanStatusCommand(),a._initScanCancelCommand(),a._initScanPauseCommand(),a._initScanResumeCommand(),a._initCheckStatusCommand(),a._initGetStatusCommand(),a}return __extends(i,n),i.prototype._initScanStatusCommand=function(){var n=this,i=[],a=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"dlm/download",!0,this._corsOperation,!0);a.FailedEventType=e.Utility.EventTypeEnum.DLMFailed,i.push(a);var o=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"dlm/status",!1,this._corsOperation,!0);o.RetryInPeroid=!0,o.SetLoopExecution(!0,(function(e){return e.Status=n.workOutDataStatus(e),t.DLMInfrastructureLogic.ScanStatusLoopHandler(e)})),o.DataHandler=function(e,i){return i.Status=n.workOutDataStatus(i),t.DLMInfrastructureLogic.ScanStatusHandler(i,n,e,o,0)},o.FailedEventType=e.Utility.EventTypeEnum.DLMFailed,i.push(o);var r=new e.Component.Command(e.Component.CommandTypeEnum.ScanStatus,i,!0);this.RegisterCommand(r)},i.prototype._initScanCancelCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"dlm/cancel",!0,this._corsOperation,!0);n.FailedEventType=e.Utility.EventTypeEnum.DLMCancelFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.ScanCancel,t,!1);this.RegisterCommand(i)},i.prototype._initScanPauseCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"dlm/pause",!0,this._corsOperation,!0);n.FailedEventType=e.Utility.EventTypeEnum.DLMPauseFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.ScanPause,t,!1);this.RegisterCommand(i)},i.prototype._initScanResumeCommand=function(){var n=this,i=[],a=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"dlm/resume",!0,this._corsOperation,!0);a.FailedEventType=e.Utility.EventTypeEnum.DLMResumeFailed,i.push(a);var o=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"dlm/status",!1,this._corsOperation,!0);o.RetryInPeroid=!0,o.SetLoopExecution(!0,(function(e){return e.Status=n.workOutDataStatus(e),t.DLMInfrastructureLogic.ScanStatusLoopHandler(e)})),o.DataHandler=function(e,i){return i.Status=n.workOutDataStatus(i),t.DLMInfrastructureLogic.ScanStatusHandler(i,n,e,o,1)},o.FailedEventType=e.Utility.EventTypeEnum.DLMFailed,i.push(o);var r=new e.Component.Command(e.Component.CommandTypeEnum.ScanResume,i,!0);this.RegisterCommand(r)},i.prototype._initGetStatusCommand=function(){var n=this,i=[],a=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"dlm/download",!1,this._corsOperation);a.SetLoopExecution(!0,(function(e){return e.Status=n.workOutDataStatus(e),t.DLMInfrastructureLogic.ScanStatusLoopHandler(e)})),a.DataHandler=function(e,i){return i.status=t.DownloadStatus.Downloading,t.DLMInfrastructureLogic.ScanStatusHandler(i,n,e,a,1)},i.push(a);var o=new e.Component.Command(e.Component.CommandTypeEnum.Scan,i,!0);this.RegisterCommand(o)},i.prototype._initCheckStatusCommand=function(){var n=this,i=[],a=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"dlm/download",!0,this._corsOperation,!0);a.DataHandler=function(i,a){var o=a.Exception,r=n.workOutDataStatus(a);return o!==t.DLMExceptionEnum.None||r!==t.DownloadStatus.Waiting&&r!==t.DownloadStatus.Downloading||n.TriggerEvent(e.Utility.EventTypeEnum.DLMCheckStatusSuccess,i,a),!0},a.RetryTimes=0,i.push(a);var o=new e.Component.Command(e.Component.CommandTypeEnum.CheckStatus,i,!0);this.RegisterCommand(o)},i}(t.AbstractComponent);t.DLMV1=n}(e.Component||(e.Component={}))}(LSBV4||(LSBV4={})),function(e){!function(t){var n=function(t){function n(n){var i=t.call(this,n)||this;return i._redirectOperation=e.Operation.RedirectOperation.GetSingleton(),i._corsOperation=e.Operation.CORSOperation.GetSingleton(),i._initScanStatusCommand(),i._initScanCancelCommand(),i._initScanPauseCommand(),i._initScanResumeCommand(),i._initCheckStatusCommand(),i._initGetStatusCommand(),i}return __extends(n,t),n.prototype._initScanStatusCommand=function(){var t=this,n=[],i=new e.Operation.RedirectRequest(e.Operation.RedirectRequestActionEnum.DLMStart,this._redirectOperation,!0);i.FailedEventType=e.Utility.EventTypeEnum.DLMFailed,n.push(i);var a=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.DELETE,"DlmNxtCmd",!1,this._corsOperation);a.FailedEventType=e.Utility.EventTypeEnum.DLMFailed,n.push(a);var r=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"DlmData",!1,this._corsOperation);r.RetryInPeroid=!0,r.SetLoopExecution(!0,(function(e){return o.ScanStatusLoopHandler(e)})),r.DataHandler=function(e,n){return o.ScanStatusHandler(n,t,e,r,1)},r.FailedEventType=e.Utility.EventTypeEnum.DLMFailed,n.push(r);var s=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.DELETE,"DlmData~DlmNxtCmd",!1,this._corsOperation);s.BranchVersion=1,s.RunWhenFailed=!0,n.push(s);var u=new e.Component.Command(e.Component.CommandTypeEnum.ScanStatus,n,!0);this.RegisterCommand(u)},n.prototype._initScanCancelCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"DlmNxtCmd",!0,this._corsOperation,!1);n.SendFixedData=!0,n.RequestData="CancelDlmDownload",n.FailedEventType=e.Utility.EventTypeEnum.DLMCancelFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.ScanCancel,t,!1);this.RegisterCommand(i)},n.prototype._initScanPauseCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"DlmNxtCmd",!0,this._corsOperation,!1);n.SendFixedData=!0,n.RequestData="PauseDlmDownload",n.FailedEventType=e.Utility.EventTypeEnum.DLMPauseFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.ScanPause,t,!1);this.RegisterCommand(i)},n.prototype._initScanResumeCommand=function(){var t=this,n=[],i=new e.Operation.RedirectRequest(e.Operation.RedirectRequestActionEnum.DLMResume,this._redirectOperation);i.FailedEventType=e.Utility.EventTypeEnum.DLMResumeFailed,n.push(i);var a=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.DELETE,"DlmNxtCmd",!0,this._corsOperation);a.FailedEventType=e.Utility.EventTypeEnum.DLMResumeFailed,n.push(a);var r=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"DlmData",!1,this._corsOperation);r.RetryInPeroid=!0,r.SetLoopExecution(!0,(function(e){return o.ScanStatusLoopHandler(e)})),r.DataHandler=function(e,n){return o.ScanStatusHandler(n,t,e,r,1)},r.FailedEventType=e.Utility.EventTypeEnum.DLMFailed,n.push(r);var s=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.DELETE,"DlmData~DlmNxtCmd",!1,this._corsOperation);s.BranchVersion=1,s.RunWhenFailed=!0,n.push(s);var u=new e.Component.Command(e.Component.CommandTypeEnum.ScanResume,n,!0);this.RegisterCommand(u)},n.prototype._initGetStatusCommand=function(){var t=this,n=[],i=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"DlmData",!1,this._corsOperation);i.SetLoopExecution(!0,(function(e){return o.ScanStatusLoopHandler(e)})),i.DataHandler=function(e,n){return o.ScanStatusHandler(n,t,e,i,1)},n.push(i);var a=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.DELETE,"DlmData~DlmNxtCmd",!1,this._corsOperation);a.BranchVersion=1,a.RunWhenFailed=!0,n.push(a);var r=new e.Component.Command(e.Component.CommandTypeEnum.Scan,n,!0);this.RegisterCommand(r)},n.prototype._initCheckStatusCommand=function(){var t=this,n=[],o=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"DlmData",!1,this._corsOperation);o.DataHandler=function(n,o){var r=o.Exception,s=o.Status;return r!==a.None||s!==i.Waiting&&s!==i.Downloading||t.TriggerEvent(e.Utility.EventTypeEnum.DLMCheckStatusSuccess,n,o),!0},o.RetryTimes=0,n.push(o);var r=new e.Component.Command(e.Component.CommandTypeEnum.CheckStatus,n,!0);this.RegisterCommand(r)},n}(t.AbstractComponent);t.DLMV4=n;var i,a,o=function(){function t(){}return t.DlmCommonExceptionDataHander=function(t,n,i){switch(t.Exception){case a.UserCancelSelectingLocation:return n.TriggerEvent(e.Utility.EventTypeEnum.UserCancelSelectingLocation,i,t),!1;case a.NotEnoughDiskSpace:return n.TriggerEvent(e.Utility.EventTypeEnum.NotEnoughDiskSpace,i,t),!1;case a.UnhandledException:return n.TriggerEvent(e.Utility.EventTypeEnum.UnhandledException,i,t),!1;case a.WrongRequest:return n.TriggerEvent(e.Utility.EventTypeEnum.WrongRequest,i,t),!1;default:return!0}},t.ScanStatusHandler=function(t,n,a,o,r){if(!0!==this.DlmCommonExceptionDataHander(t,n,a))return!1;var s=t.Status,u=null==t.Callback?"DLM":t.Callback.trim();if("DLM"===u){if(null!=s)switch(s){case i.Downloading:n.TriggerEvent(e.Utility.EventTypeEnum.DLMStatusSuccess,a,t);break;case i.Waiting:n.TriggerEvent(e.Utility.EventTypeEnum.Waiting,a,t);break;case i.Canceled:return n.TriggerEvent(e.Utility.EventTypeEnum.DLMCancelSuccess,a,t),null!=o&&null!=r&&(o.NextBranchVersion=r),!1;case i.Completed:n.TriggerEvent(e.Utility.EventTypeEnum.DLMSuccess,a,t),null!=o&&null!=r&&(o.NextBranchVersion=r);break;case i.Paused:n.TriggerEvent(e.Utility.EventTypeEnum.DLMPauseSuccess,a,t);break;case i.Error:return n.TriggerEvent(e.Utility.EventTypeEnum.DLMError,a,t),null!=o&&null!=r&&(o.NextBranchVersion=r),!1}}else if("ADUP"===u){if(null!=s)switch(s){case i.Downloading:n.TriggerEvent(e.Utility.EventTypeEnum.DownloadTVSUStatus,a,t);break;case i.Waiting:n.TriggerEvent(e.Utility.EventTypeEnum.Waiting,a,t);break;case i.Canceled:return n.TriggerEvent(e.Utility.EventTypeEnum.DownloadTVSUCancel,a,t),!1;case i.Completed:n.TriggerEvent(e.Utility.EventTypeEnum.DownloadTVSUStatus,a,t);break;case i.Paused:return n.TriggerEvent(e.Utility.EventTypeEnum.DownloadTVSUPause,a,t),!1;case i.Error:return n.TriggerEvent(e.Utility.EventTypeEnum.DownloadTVSUError,a,t),!1}}else if("SysDiag"===u&&null!=s)switch(s){case i.Downloading:n.TriggerEvent(e.Utility.EventTypeEnum.DownloadLSCStatus,a,t);break;case i.Waiting:n.TriggerEvent(e.Utility.EventTypeEnum.Waiting,a,t);break;case i.Canceled:return n.TriggerEvent(e.Utility.EventTypeEnum.DownloadLSCCancel,a,t),!1;case i.Completed:n.TriggerEvent(e.Utility.EventTypeEnum.DownloadLSCStatus,a,t);break;case i.Paused:return n.TriggerEvent(e.Utility.EventTypeEnum.DownloadLSCPause,a,t),!1;case i.Error:return n.TriggerEvent(e.Utility.EventTypeEnum.DownloadLSCError,a,t),!1}return!0},t.ScanStatusLoopHandler=function(e){var t=e.Status,n=e.Exception;return null!=n&&n!==a.None||null!=t&&(t===i.Canceled||t===i.Completed||t===i.Paused||t===i.Canceled)},t}();t.DLMInfrastructureLogic=o,function(e){e[e.Initialized=0]="Initialized",e[e.Waiting=1]="Waiting",e[e.Downloading=2]="Downloading",e[e.Pausing=3]="Pausing",e[e.Paused=4]="Paused",e[e.Canceling=5]="Canceling",e[e.Canceled=6]="Canceled",e[e.Completed=7]="Completed",e[e.Error=8]="Error"}(i=t.DownloadStatus||(t.DownloadStatus={})),function(e){e[e.None=0]="None",e[e.UserCancelSelectingLocation=1]="UserCancelSelectingLocation",e[e.NotEnoughDiskSpace=2]="NotEnoughDiskSpace",e[e.UnhandledException=3]="UnhandledException",e[e.WrongRequest=4]="WrongRequest"}(a=t.DLMExceptionEnum||(t.DLMExceptionEnum={}))}(e.Component||(e.Component={}))}(LSBV4||(LSBV4={})),function(e){!function(t){var n=function(t){function n(n){var i=t.call(this,n)||this;return i._redirectOperation=e.Operation.RedirectOperation.GetSingleton(),i._corsOperation=e.Operation.CORSOperation.GetSingleton(),i._initScanCommand(),i._initContinuousScanCommand(),i}return __extends(n,t),n.prototype._initScanCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"Detect",!1,this._corsOperation,!0);n.Timeout=5e3,n.SuccessEventType=e.Utility.EventTypeEnum.RedirectSuccess,n.FailedEventType=e.Utility.EventTypeEnum.RedirectFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.Scan,t,!0);this.RegisterCommand(i)},n.prototype._initContinuousScanCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"Detect",!1,this._corsOperation,!0);n.Timeout=5e3,n.RetryInPeroid=!0,n.SuccessEventType=e.Utility.EventTypeEnum.RedirectSuccess,n.FailedEventType=e.Utility.EventTypeEnum.RedirectFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.ContinuousScan,t,!0);this.RegisterCommand(i)},n}(t.AbstractComponent);t.DetectForHTTPPageV4=n}(e.Component||(e.Component={}))}(LSBV4||(LSBV4={})),function(e){!function(t){var n=function(t){function n(n){var i=t.call(this,n)||this;return i._corsOperation=e.Operation.CORSOperation.GetSingleton(),i._initDetectCommand(),i}return __extends(n,t),n.prototype._initDetectCommand=function(){var t=this,n=[],i=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"machine_info",!1,this._corsOperation,!0);i.DataHandler=function(n,i){return""!==i.SN||(t.TriggerEvent(e.Utility.EventTypeEnum.NotLenovo,n,i),!1)},i.SuccessEventType=e.Utility.EventTypeEnum.DetectSuccess,i.FailedEventType=e.Utility.EventTypeEnum.DetectFailed,n.push(i);var a=new e.Component.Command(e.Component.CommandTypeEnum.Scan,n,!0);this.RegisterCommand(a)},n}(t.AbstractComponent);t.DetectV1=n}(e.Component||(e.Component={}))}(LSBV4||(LSBV4={})),function(e){!function(t){var n,i=function(t){function i(n){var i=t.call(this,n)||this;return i._redirectOperation=e.Operation.RedirectOperation.GetSingleton(),i._corsOperation=e.Operation.CORSOperation.GetSingleton(),i._initScanStatusCommand(),i._initScanStatusCommandForVA(),i}return __extends(i,t),i.prototype._initScanStatus=function(t,i){var a=this;void 0===i&&(i=!1);var o=new e.Operation.RedirectRequest(e.Operation.RedirectRequestActionEnum.Detect,this._redirectOperation);o.FailedEventType=e.Utility.EventTypeEnum.DetectFailed,o.ToNewWindow=i,t.push(o);var r=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"DetectData",!1,this._corsOperation);r.RetryInPeroid=!0,r.DataHandler=function(t,i){return i.Exception===n.None||(a.TriggerEvent(e.Utility.EventTypeEnum.NotLenovo,t,i),!1)},r.SuccessEventType=e.Utility.EventTypeEnum.DetectSuccess,r.FailedEventType=e.Utility.EventTypeEnum.DetectFailed,t.push(r);var s=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.DELETE,"DetectData",!1,this._corsOperation);s.RunWhenFailed=!0,t.push(s)},i.prototype._initScanStatusCommand=function(){var t=[];this._initScanStatus(t,!1);var n=new e.Component.Command(e.Component.CommandTypeEnum.ScanStatus,t,!0);this.RegisterCommand(n)},i.prototype._initScanStatusCommandForVA=function(){var t=[];this._initScanStatus(t,!0);var n=new e.Component.Command(e.Component.CommandTypeEnum.ScanStatusForVA,t,!0);this.RegisterCommand(n)},i}(t.AbstractComponent);t.DetectV4=i,function(e){e[e.None=0]="None",e[e.NotLenovo=1]="NotLenovo",e[e.CommunicationFailed=-1]="CommunicationFailed",e[e.UserCancelled=-2]="UserCancelled"}(n=t.DetectExceptionEnum||(t.DetectExceptionEnum={}))}(e.Component||(e.Component={}))}(LSBV4||(LSBV4={})),function(e){!function(t){var n=function(t){function n(n){var i=t.call(this,n)||this;return i._corsOperation=e.Operation.CORSOperation.GetSingleton(),i._customOperation=e.Operation.CustomOperation.GetSingleton(),i._initPingCommand(),i._initContinuousPingCommand(),i._initUpdateLSBCommand(),i._initCancelLSBInstallCommand(),i}return __extends(n,t),n.prototype._initPingCommand=function(){var t=this,n=[],i=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"ping",!1,this._corsOperation,!0);i.DataHandler=function(n,i){var a=i.version;return e.Utility.IsValidVersion(e.Utility.LSB_CLIENT_VERSION,a)?t.TriggerEvent(e.Utility.EventTypeEnum.PingSuccess,n,i):t.TriggerEvent(e.Utility.EventTypeEnum.NeedUpdateLsb,n,!0),!0},i.Timeout=1e3,i.FailedEventType=e.Utility.EventTypeEnum.PingFailed,n.push(i);var a=new e.Component.Command(e.Component.CommandTypeEnum.CheckStatus,n,!0);this.RegisterCommand(a)},n.prototype._initContinuousPingCommand=function(){var t=this,i=[],a=new e.Operation.CustomOperationRequest((function(){return n._isCancelled=!1,!0}),this._customOperation);a.FailedEventType=e.Utility.EventTypeEnum.ADUPFailed,i.push(a);var o=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"ping",!1,this._corsOperation,!0);o.Timeout=1e3,o.RetryInPeroid=!0,o.CustomRetryStop=function(){return!0===n._isCancelled},o.DataHandler=function(i,a){if(!1===n._isCancelled){var o=a.version;e.Utility.IsValidVersion(e.Utility.LSB_CLIENT_VERSION,o)?t.TriggerEvent(e.Utility.EventTypeEnum.PingSuccess,i,a):t.TriggerEvent(e.Utility.EventTypeEnum.NeedUpdateLsb,i,!0)}return!0},o.FailedEventType=e.Utility.EventTypeEnum.PingFailed,i.push(o);var r=new e.Component.Command(e.Component.CommandTypeEnum.ContinuousScan,i,!0);this.RegisterCommand(r)},n.prototype._initUpdateLSBCommand=function(){var t=this,i=[],a=new e.Operation.CustomOperationRequest((function(){return n._isCancelled=!1,!0}),this._customOperation);a.FailedEventType=e.Utility.EventTypeEnum.ADUPFailed,i.push(a);var o=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"update",!1,this._corsOperation,!0);o.DataHandler=function(n,i){return!(parseInt(i.returnCode)>0)||(t.TriggerEvent(e.Utility.EventTypeEnum.LSBUpdateFailed,n,i),!1)},o.Interval=3e3,i.push(o);var r=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"ping",!1,this._corsOperation,!0);r.DataHandler=function(n,i){var a=i.version;return e.Utility.IsValidVersion(e.Utility.LSB_CLIENT_VERSION,a)?t.TriggerEvent(e.Utility.EventTypeEnum.LSBUpdateSuccess,n,i):t.TriggerEvent(e.Utility.EventTypeEnum.NeedUpdateLsb,n,!1),!0},r.CustomRetryStop=function(){return!0===n._isCancelled},r.Timeout=1e3,r.RetryInPeroid=!0,r.Interval=3e3,r.FailedEventType=e.Utility.EventTypeEnum.PingFailed,i.push(r);var s=new e.Operation.CustomOperationRequest((function(){return!0!==n._isCancelled}),this._customOperation);i.push(s);var u=new e.Component.Command(e.Component.CommandTypeEnum.InstallApp,i,!0);this.RegisterCommand(u)},n.prototype._initCancelLSBInstallCommand=function(){var t=[],i=new e.Operation.CustomOperationRequest((function(){return n._isCancelled=!0,!0}),this._customOperation);i.FailedEventType=e.Utility.EventTypeEnum.ADUPCancelFailed,t.push(i);var a=new e.Component.Command(e.Component.CommandTypeEnum.CancelWithOutCommunication,t,!1);this.RegisterCommand(a)},n._isCancelled=!1,n}(t.AbstractComponent);t.LSBInstallV1=n}(e.Component||(e.Component={}))}(LSBV4||(LSBV4={})),function(e){!function(t){var n=function(t){function n(n){var i=t.call(this,n)||this;return i._redirectOperation=e.Operation.RedirectOperation.GetSingleton(),i._corsOperation=e.Operation.CORSOperation.GetSingleton(),i._initScanCommand(),i._initContinuousScanCommand(),i._initRunCommand(),i._initContinuousRunCommand(),i._initRunByIdCommand(),i._initContinuousRunByIdCommand(),i}return __extends(n,t),n.prototype._initScanCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"OsDiagScan",!1,this._corsOperation,!0);n.Timeout=5e3,n.SuccessEventType=e.Utility.EventTypeEnum.RedirectSuccess,n.FailedEventType=e.Utility.EventTypeEnum.RedirectFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.Scan,t,!0);this.RegisterCommand(i)},n.prototype._initContinuousScanCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"OsDiagScan",!1,this._corsOperation,!0);n.Timeout=5e3,n.RetryInPeroid=!0,n.SuccessEventType=e.Utility.EventTypeEnum.RedirectSuccess,n.FailedEventType=e.Utility.EventTypeEnum.RedirectFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.ContinuousScan,t,!0);this.RegisterCommand(i)},n.prototype._initRunCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"OsDiag",!0,this._corsOperation,!0);n.Timeout=5e3,n.SuccessEventType=e.Utility.EventTypeEnum.RedirectSuccess,n.FailedEventType=e.Utility.EventTypeEnum.RedirectFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.Run,t,!0);this.RegisterCommand(i)},n.prototype._initContinuousRunCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"OsDiag",!0,this._corsOperation,!0);n.Timeout=5e3,n.RetryInPeroid=!0,n.SuccessEventType=e.Utility.EventTypeEnum.RedirectSuccess,n.FailedEventType=e.Utility.EventTypeEnum.RedirectFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.ContinuousRun,t,!0);this.RegisterCommand(i)},n.prototype._initRunByIdCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"OsDiagRunById",!0,this._corsOperation,!0);n.Timeout=5e3,n.SuccessEventType=e.Utility.EventTypeEnum.RedirectSuccess,n.FailedEventType=e.Utility.EventTypeEnum.RedirectFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.RunById,t,!0);this.RegisterCommand(i)},n.prototype._initContinuousRunByIdCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"OsDiagRunById",!0,this._corsOperation,!0);n.Timeout=5e3,n.RetryInPeroid=!0,n.SuccessEventType=e.Utility.EventTypeEnum.RedirectSuccess,n.FailedEventType=e.Utility.EventTypeEnum.RedirectFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.ContinuousRunById,t,!0);this.RegisterCommand(i)},n}(t.AbstractComponent);t.OSDiagForHTTPPageV4=n}(e.Component||(e.Component={}))}(LSBV4||(LSBV4={})),function(e){!function(t){var n=function(n){function i(t){var i=n.call(this,t)||this;return i._redirectOperation=e.Operation.RedirectOperation.GetSingleton(),i._corsOperation=e.Operation.CORSOperation.GetSingleton(),i._customOperation=e.Operation.CustomOperation.GetSingleton(),i._initScanStatusCommand(),i._initRunCommand(),i._initRunByIdCommand(),i}return __extends(i,n),i.prototype._initScanStatusCommand=function(){var n=this,a=[],o=new e.Operation.CustomOperationRequest((function(){return i._isCancelled=!1,!0}),this._customOperation);o.FailedEventType=e.Utility.EventTypeEnum.OSDiagScanFailed,a.push(o);var r=new e.Operation.CustomOperationRequest((function(){return!0!==i._isCancelled}),this._customOperation);a.push(r);var s=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"osdiag/scandiag",!1,this._corsOperation,!0);s.DataHandler=function(i,a){return a.Exception===t.DiagStatus.None||(n.TriggerEvent(e.Utility.EventTypeEnum.UnhandledException,i,a),!1)},s.FailedEventType=e.Utility.EventTypeEnum.OSDiagScanFailed,s.SuccessEventType=e.Utility.EventTypeEnum.OSDiagScanSuccess,a.push(s);var u=new e.Component.Command(e.Component.CommandTypeEnum.ScanStatus,a,!0);this.RegisterCommand(u)},i.prototype._initRunCommand=function(){var n=this,a=[],o=new e.Operation.CustomOperationRequest((function(){return i._isCancelled=!1,!0}),this._customOperation);o.FailedEventType=e.Utility.EventTypeEnum.OSDiagRunFailed,a.push(o);var r=new e.Operation.CustomOperationRequest((function(){return!0!==i._isCancelled}),this._customOperation);a.push(r);var s=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"osdiag/link",!0,this._corsOperation,!0);s.DataHandler=function(i,a){return(a=JSON.parse(a)).Exception===t.DiagStatus.None||(n.TriggerEvent(e.Utility.EventTypeEnum.UnhandledException,i,a),!1)},s.FailedEventType=e.Utility.EventTypeEnum.OSDiagRunFailed,s.SuccessEventType=e.Utility.EventTypeEnum.OSDiagRunSuccess,a.push(s);var u=new e.Component.Command(e.Component.CommandTypeEnum.Run,a,!0);this.RegisterCommand(u)},i.prototype._initRunByIdCommand=function(){var n=this,a=[],o=new e.Operation.CustomOperationRequest((function(){return i._isCancelled=!1,!0}),this._customOperation);o.FailedEventType=e.Utility.EventTypeEnum.OSDiagRunFailed,a.push(o);var r=new e.Operation.CustomOperationRequest((function(){return!0!==i._isCancelled}),this._customOperation);a.push(r);var s=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"osdiag/runid",!0,this._corsOperation,!0);s.DataHandler=function(i,a){return a.Exception===t.DiagStatus.None||(n.TriggerEvent(e.Utility.EventTypeEnum.UnhandledException,i,a),!1)},s.SuccessEventType=e.Utility.EventTypeEnum.OSDiagRunByIdSuccess,s.FailedEventType=e.Utility.EventTypeEnum.OSDiagRunByIdFailed,a.push(s);var u=new e.Component.Command(e.Component.CommandTypeEnum.RunById,a,!0);this.RegisterCommand(u)},i._isCancelled=!1,i}(t.AbstractComponent);t.OSDiagV1=n}(e.Component||(e.Component={}))}(LSBV4||(LSBV4={})),function(e){!function(t){var n,i=function(t){function i(n){var i=t.call(this,n)||this;return i._redirectOperation=e.Operation.RedirectOperation.GetSingleton(),i._corsOperation=e.Operation.CORSOperation.GetSingleton(),i._initScanStatusCommand(),i._initRunCommand(),i._initRunByIdCommand(),i}return __extends(i,t),i.prototype._initScanStatusCommand=function(){var t=this,i=[],a=new e.Operation.RedirectRequest(e.Operation.RedirectRequestActionEnum.OSDiagScan,this._redirectOperation);a.FailedEventType=e.Utility.EventTypeEnum.OSDiagScanFailed,i.push(a);var o=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"OsDiagScanData",!1,this._corsOperation);o.RetryInPeroid=!0,o.DataHandler=function(i,a){return a.Exception===n.None||(t.TriggerEvent(e.Utility.EventTypeEnum.UnhandledException,i,a),!1)},o.SuccessEventType=e.Utility.EventTypeEnum.OSDiagScanSuccess,o.FailedEventType=e.Utility.EventTypeEnum.OSDiagScanFailed,i.push(o);var r=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.DELETE,"OsDiagScanData",!1,this._corsOperation);r.RunWhenFailed=!0,i.push(r);var s=new e.Component.Command(e.Component.CommandTypeEnum.ScanStatus,i,!0);this.RegisterCommand(s)},i.prototype._initRunCommand=function(){var t=this,i=[],a=new e.Operation.RedirectRequest(e.Operation.RedirectRequestActionEnum.OSDiagRun,this._redirectOperation,!0);a.FailedEventType=e.Utility.EventTypeEnum.OSDiagRunFailed,i.push(a);var o=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"OsDiagData",!1,this._corsOperation);o.RetryInPeroid=!0,o.DataHandler=function(i,a){return a.Exception===n.None||(t.TriggerEvent(e.Utility.EventTypeEnum.UnhandledException,i,a),!1)},o.SuccessEventType=e.Utility.EventTypeEnum.OSDiagRunSuccess,o.FailedEventType=e.Utility.EventTypeEnum.OSDiagRunFailed,i.push(o);var r=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.DELETE,"OsDiagData",!1,this._corsOperation);r.RunWhenFailed=!0,i.push(r);var s=new e.Component.Command(e.Component.CommandTypeEnum.Run,i,!0);this.RegisterCommand(s)},i.prototype._initRunByIdCommand=function(){var t=this,i=[],a=new e.Operation.RedirectRequest(e.Operation.RedirectRequestActionEnum.OSDiagRunById,this._redirectOperation,!0);a.FailedEventType=e.Utility.EventTypeEnum.OSDiagRunByIdFailed,i.push(a);var o=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"OsDiagRunIdData",!1,this._corsOperation);o.RetryInPeroid=!0,o.DataHandler=function(i,a){return a.Exception===n.None||(t.TriggerEvent(e.Utility.EventTypeEnum.UnhandledException,i,a),!1)},o.SuccessEventType=e.Utility.EventTypeEnum.OSDiagRunByIdSuccess,o.FailedEventType=e.Utility.EventTypeEnum.OSDiagRunByIdFailed,i.push(o);var r=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.DELETE,"OsDiagRunIdData",!1,this._corsOperation);r.RunWhenFailed=!0,i.push(r);var s=new e.Component.Command(e.Component.CommandTypeEnum.RunById,i,!0);this.RegisterCommand(s)},i}(t.AbstractComponent);t.OSDiagV4=i,function(e){e[e.None=0]="None"}(n=t.DiagStatus||(t.DiagStatus={}))}(e.Component||(e.Component={}))}(LSBV4||(LSBV4={})),function(e){!function(t){var n=function(t){function n(n){var i=t.call(this,n)||this;return i._redirectOperation=e.Operation.RedirectOperation.GetSingleton(),i._corsOperation=e.Operation.CORSOperation.GetSingleton(),i._initScanCommand(),i._initContinuousScanCommand(),i._initRunByIdCommand(),i._initContinuousRunByIdCommand(),i}return __extends(n,t),n.prototype._initScanCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"SysDiag",!1,this._corsOperation,!0);n.Timeout=5e3,n.SuccessEventType=e.Utility.EventTypeEnum.RedirectSuccess,n.FailedEventType=e.Utility.EventTypeEnum.RedirectFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.Scan,t,!0);this.RegisterCommand(i)},n.prototype._initContinuousScanCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"SysDiag",!1,this._corsOperation,!0);n.Timeout=5e3,n.RetryInPeroid=!0,n.SuccessEventType=e.Utility.EventTypeEnum.RedirectSuccess,n.FailedEventType=e.Utility.EventTypeEnum.RedirectFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.ContinuousScan,t,!0);this.RegisterCommand(i)},n.prototype._initRunByIdCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"ModuleBasedDiag",!0,this._corsOperation,!0);n.Timeout=5e3,n.SuccessEventType=e.Utility.EventTypeEnum.RedirectSuccess,n.FailedEventType=e.Utility.EventTypeEnum.RedirectFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.RunById,t,!0);this.RegisterCommand(i)},n.prototype._initContinuousRunByIdCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"ModuleBasedDiag",!0,this._corsOperation,!0);n.Timeout=5e3,n.RetryInPeroid=!0,n.SuccessEventType=e.Utility.EventTypeEnum.RedirectSuccess,n.FailedEventType=e.Utility.EventTypeEnum.RedirectFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.ContinuousRunById,t,!0);this.RegisterCommand(i)},n}(t.AbstractComponent);t.SysDiagForHTTPPageV4=n}(e.Component||(e.Component={}))}(LSBV4||(LSBV4={})),function(e){!function(t){var n=function(n){function i(t){var i=n.call(this,t)||this;return i._redirectOperation=e.Operation.RedirectOperation.GetSingleton(),i._corsOperation=e.Operation.CORSOperation.GetSingleton(),i._customOperation=e.Operation.CustomOperation.GetSingleton(),i._initModuleBasedDiagCommand(),i._initCancelScanCommand(),i}return __extends(i,n),i.prototype._diagCommonExceptionDataHander=function(n,i,a,o){switch(n.Exception){case t.SysDiagExceptionEnum.SystemNotSupport:return this.TriggerEvent(e.Utility.EventTypeEnum.SystemNotSupport,i,n),!1;case t.SysDiagExceptionEnum.NoLSC:return null!=a&&null!=o&&(a.NextBranchVersion=o,!0);case t.SysDiagExceptionEnum.ErrorLaunchLSC:return this.TriggerEvent(e.Utility.EventTypeEnum.ErrorLaunchLSC,i,n),!1;case t.SysDiagExceptionEnum.ErrorDownloadLSC:return this.TriggerEvent(e.Utility.EventTypeEnum.ErrorDownloadLSC,i,n),!1;case t.SysDiagExceptionEnum.LSCNotLaunch:return this.TriggerEvent(e.Utility.EventTypeEnum.LSCNotLaunch,i,n),!1;case t.SysDiagExceptionEnum.UnhandledException:return this.TriggerEvent(e.Utility.EventTypeEnum.UnhandledException,i,n),!1;case t.SysDiagExceptionEnum.WrongRequest:return this.TriggerEvent(e.Utility.EventTypeEnum.WrongRequest,i,n),!1;case t.SysDiagExceptionEnum.NotLenovo:return this.TriggerEvent(e.Utility.EventTypeEnum.NotLenovo,i,n),!1;case t.SysDiagExceptionEnum.NoWebAPIData:return this.TriggerEvent(e.Utility.EventTypeEnum.NoWebAPIData,i,n),!1;case t.SysDiagExceptionEnum.WrongWebAPIData:return this.TriggerEvent(e.Utility.EventTypeEnum.WrongWebAPIData,i,n),!1;case t.SysDiagExceptionEnum.ModuleNotSupport:return this.TriggerEvent(e.Utility.EventTypeEnum.ModuleNotSupport,i,n),!1;default:return!0}},i.prototype._initModuleBasedDiagCommand=function(){var n=this,a=[],o=new e.Operation.CustomOperationRequest((function(){return i._isCancelled=!1,!0}),this._customOperation);o.FailedEventType=e.Utility.EventTypeEnum.DiagFailed,a.push(o);var r=new e.Operation.CustomOperationRequest((function(){return!0!==i._isCancelled}),this._customOperation);a.push(r);var s=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"diag/runspecificdiags",!0,this._corsOperation,!0);s.Timeout=5e3,s.FailedEventType=e.Utility.EventTypeEnum.DiagFailed,a.push(s);var u=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"diag/getdiaglog",!1,this._corsOperation,!0);u.SetLoopExecution(!0,(function(e){var n=e.Exception,i=e.OverallProgress;return n!==t.SysDiagExceptionEnum.None&&n!==t.SysDiagExceptionEnum.Wait||100===i||!0===e.IsCanceled})),u.DataHandler=function(i,a){switch(a.Exception){case t.SysDiagExceptionEnum.None:return!0===a.IsCanceled?n.TriggerEvent(e.Utility.EventTypeEnum.DiagCancelSuccess,i,a):n.TriggerEvent(e.Utility.EventTypeEnum.DiagStatusSuccess,i,a),!0;case t.SysDiagExceptionEnum.Wait:return!0===a.IsCanceled?n.TriggerEvent(e.Utility.EventTypeEnum.DiagCancelSuccess,i,a):n.TriggerEvent(e.Utility.EventTypeEnum.Waiting,i,a),!0;default:return n._diagCommonExceptionDataHander(a,i)}},u.FailedEventType=e.Utility.EventTypeEnum.DiagFailed,a.push(u);var l=new e.Component.Command(e.Component.CommandTypeEnum.ContinuousRunById,a,!0);this.RegisterCommand(l)},i.prototype._initCancelScanCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"diag/canceldiag",!1,this._corsOperation,!0);n.FailedEventType=e.Utility.EventTypeEnum.DiagCancelFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.ScanCancel,t,!1);this.RegisterCommand(i)},i._isCancelled=!1,i}(t.AbstractComponent);t.SysDiagV1=n}(e.Component||(e.Component={}))}(LSBV4||(LSBV4={})),function(e){!function(t){var n,i=function(i){function a(t){var n=i.call(this,t)||this;return n._redirectOperation=e.Operation.RedirectOperation.GetSingleton(),n._corsOperation=e.Operation.CORSOperation.GetSingleton(),n._initModuleBasedDiagCommand(),n._initScanStatusCommand(),n._initCancelScanCommand(),n._initCancelInstallLSCCommand(),n}return __extends(a,i),a.prototype._diagCommonExceptionDataHander=function(t,i,a,o){switch(t.Exception){case n.SystemNotSupport:return this.TriggerEvent(e.Utility.EventTypeEnum.SystemNotSupport,i,t),!1;case n.NoLSC:return null!=a&&null!=o&&(a.NextBranchVersion=o,!0);case n.ErrorLaunchLSC:return this.TriggerEvent(e.Utility.EventTypeEnum.ErrorLaunchLSC,i,t),!1;case n.ErrorDownloadLSC:return this.TriggerEvent(e.Utility.EventTypeEnum.ErrorDownloadLSC,i,t),!1;case n.LSCNotLaunch:return this.TriggerEvent(e.Utility.EventTypeEnum.LSCNotLaunch,i,t),!1;case n.UnhandledException:return this.TriggerEvent(e.Utility.EventTypeEnum.UnhandledException,i,t),!1;case n.WrongRequest:return this.TriggerEvent(e.Utility.EventTypeEnum.WrongRequest,i,t),!1;case n.NotLenovo:return this.TriggerEvent(e.Utility.EventTypeEnum.NotLenovo,i,t),!1;case n.NoWebAPIData:return this.TriggerEvent(e.Utility.EventTypeEnum.NoWebAPIData,i,t),!1;case n.WrongWebAPIData:return this.TriggerEvent(e.Utility.EventTypeEnum.WrongWebAPIData,i,t),!1;case n.ModuleNotSupport:return this.TriggerEvent(e.Utility.EventTypeEnum.ModuleNotSupport,i,t),!1;default:return!0}},a.prototype._initModuleBasedDiagCommand=function(){var i=this,a=[],o=new e.Operation.RedirectRequest(e.Operation.RedirectRequestActionEnum.ModuleBasedDiagStart,this._redirectOperation,!0);o.FailedEventType=e.Utility.EventTypeEnum.DiagFailed,a.push(o);var r=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.DELETE,"DiagNxtCmd",!1,this._corsOperation);r.FailedEventType=e.Utility.EventTypeEnum.DiagFailed,a.push(r);var s=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"DiagData",!1,this._corsOperation),u=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.DELETE,"DiagData~DiagNxtCmd",!1,this._corsOperation);u.RunWhenFailed=!0,s.SetLoopExecution(!0,(function(e){var t=e.Exception,i=e.OverallProgress;return t!==n.None&&t!==n.Wait||100===i||!0===e.IsCanceled})),s.DataHandler=function(t,a){switch(a.Exception){case n.None:return!0===a.IsCanceled?i.TriggerEvent(e.Utility.EventTypeEnum.DiagCancelSuccess,t,a):i.TriggerEvent(e.Utility.EventTypeEnum.DiagStatusSuccess,t,a),!0;case n.Wait:return!0===a.IsCanceled?i.TriggerEvent(e.Utility.EventTypeEnum.DiagCancelSuccess,t,a):i.TriggerEvent(e.Utility.EventTypeEnum.Waiting,t,a),!0;case n.NoLSC:return u.NextBranchVersion=1,!0;default:return i._diagCommonExceptionDataHander(a,t)}},s.FailedEventType=e.Utility.EventTypeEnum.DiagFailed,a.push(s),a.push(u);var l=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"DiagDlData",!1,this._corsOperation);l.BranchVersion=1,l.RetryInPeroid=!0,l.SetLoopExecution(!0,(function(e){return t.DLMInfrastructureLogic.ScanStatusLoopHandler(e)})),l.DataHandler=function(e,n){return t.DLMInfrastructureLogic.ScanStatusHandler(n,i,e)},l.FailedEventType=e.Utility.EventTypeEnum.InstallLSCFailed,a.push(l);var p=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"LscInstallData",!1,this._corsOperation);p.BranchVersion=1,p.RetryInPeroid=!0,p.SetLoopExecution(!0,(function(e){return e.InstallStatus!==t.InstallAPPStatusEnum.Installing})),p.DataHandler=function(n,a){switch(a.InstallStatus){case t.InstallAPPStatusEnum.Installing:return i.TriggerEvent(e.Utility.EventTypeEnum.InstallLSCInstalling,n,a),!0;case t.InstallAPPStatusEnum.Complete:return i.TriggerEvent(e.Utility.EventTypeEnum.InstallLSCSuccess,n,a),!0;case t.InstallAPPStatusEnum.Canceled:return i.TriggerEvent(e.Utility.EventTypeEnum.InstallLSCCancelled,n,a),!1;default:return!1}},p.FailedEventType=e.Utility.EventTypeEnum.InstallLSCFailed,a.push(p);var c=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"DiagData",!1,this._corsOperation);c.BranchVersion=1,c.SetLoopExecution(!0,(function(e){var t=e.Exception,i=e.OverallProgress;return t!==n.None&&t!==n.Wait||100===i||!0===e.IsCanceled})),c.DataHandler=function(t,a){switch(a.Exception){case n.None:return!0===a.IsCanceled?i.TriggerEvent(e.Utility.EventTypeEnum.DiagCancelSuccess,t,a):i.TriggerEvent(e.Utility.EventTypeEnum.DiagStatusSuccess,t,a),!0;case n.Wait:return!0===a.IsCanceled?i.TriggerEvent(e.Utility.EventTypeEnum.DiagCancelSuccess,t,a):i.TriggerEvent(e.Utility.EventTypeEnum.Waiting,t,a),!0;default:return i._diagCommonExceptionDataHander(a,t)}},c.FailedEventType=e.Utility.EventTypeEnum.DiagFailed,a.push(c);var m=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.DELETE,"DiagData~DiagDlData~LscInstallData~DiagNxtCmd",!1,this._corsOperation);m.BranchVersion=1,m.RunWhenFailed=!0,a.push(m);var d=new e.Component.Command(e.Component.CommandTypeEnum.ContinuousRunById,a,!0);this.RegisterCommand(d)},a.prototype._initScanStatusCommand=function(){var i=this,a=[],o=new e.Operation.RedirectRequest(e.Operation.RedirectRequestActionEnum.SysDiagStart,this._redirectOperation);o.FailedEventType=e.Utility.EventTypeEnum.DiagFailed,a.push(o);var r=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.DELETE,"DiagNxtCmd",!1,this._corsOperation);r.FailedEventType=e.Utility.EventTypeEnum.DiagFailed,a.push(r);var s=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"DiagData",!1,this._corsOperation);s.SetLoopExecution(!0,(function(e){var t=e.Exception,i=e.OverallProgress;return t!==n.None&&t!==n.Wait||100===i||!0===e.IsCanceled})),s.DataHandler=function(t,a){switch(a.Exception){case n.None:return!0===a.IsCanceled?i.TriggerEvent(e.Utility.EventTypeEnum.DiagCancelSuccess,t,a):i.TriggerEvent(e.Utility.EventTypeEnum.DiagStatusSuccess,t,a),!0;case n.Wait:return!0===a.IsCanceled?i.TriggerEvent(e.Utility.EventTypeEnum.DiagCancelSuccess,t,a):i.TriggerEvent(e.Utility.EventTypeEnum.Waiting,t,a),!0;default:return i._diagCommonExceptionDataHander(a,t,s,1)}},s.Interval=3e3,s.FailedEventType=e.Utility.EventTypeEnum.DiagFailed,a.push(s);var u=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.DELETE,"DiagData~DiagDlData~LscInstallData~DiagNxtCmd",!1,this._corsOperation);u.RunWhenFailed=!0,a.push(u);var l=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"DiagDlData",!1,this._corsOperation);l.BranchVersion=1,l.RetryInPeroid=!0,l.SetLoopExecution(!0,(function(e){return t.DLMInfrastructureLogic.ScanStatusLoopHandler(e)})),l.DataHandler=function(e,n){return t.DLMInfrastructureLogic.ScanStatusHandler(n,i,e)},l.FailedEventType=e.Utility.EventTypeEnum.InstallLSCFailed,a.push(l);var p=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"LscInstallData",!1,this._corsOperation);p.BranchVersion=1,p.RetryInPeroid=!0,p.SetLoopExecution(!0,(function(e){return e.InstallStatus!==t.InstallAPPStatusEnum.Installing})),p.DataHandler=function(n,a){switch(a.InstallStatus){case t.InstallAPPStatusEnum.Installing:return i.TriggerEvent(e.Utility.EventTypeEnum.InstallLSCInstalling,n,a),!0;case t.InstallAPPStatusEnum.Complete:return i.TriggerEvent(e.Utility.EventTypeEnum.InstallLSCSuccess,n,a),!0;case t.InstallAPPStatusEnum.Canceled:return i.TriggerEvent(e.Utility.EventTypeEnum.InstallLSCCancelled,n,a),!1;default:return!1}},p.FailedEventType=e.Utility.EventTypeEnum.InstallLSCFailed,a.push(p);var c=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"DiagData",!1,this._corsOperation);c.BranchVersion=1,c.SetLoopExecution(!0,(function(e){var t=e.Exception,i=e.OverallProgress;return t!==n.None&&t!==n.Wait||100===i||!0===e.IsCanceled})),c.DataHandler=function(t,a){switch(a.Exception){case n.None:return!0===a.IsCanceled?i.TriggerEvent(e.Utility.EventTypeEnum.DiagCancelSuccess,t,a):i.TriggerEvent(e.Utility.EventTypeEnum.DiagStatusSuccess,t,a),!0;case n.Wait:return!0===a.IsCanceled?i.TriggerEvent(e.Utility.EventTypeEnum.DiagCancelSuccess,t,a):i.TriggerEvent(e.Utility.EventTypeEnum.Waiting,t,a),!0;default:return i._diagCommonExceptionDataHander(a,t)}},c.Interval=3e3,c.FailedEventType=e.Utility.EventTypeEnum.DiagFailed,a.push(c);var m=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.DELETE,"DiagData~DiagDlData~LscInstallData~DiagNxtCmd",!1,this._corsOperation);m.BranchVersion=1,m.RunWhenFailed=!0,a.push(m);var d=new e.Component.Command(e.Component.CommandTypeEnum.ScanStatus,a,!0);this.RegisterCommand(d)},a.prototype._initCancelScanCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"DiagNxtCmd",!0,this._corsOperation,!1);n.SendFixedData=!0,n.RequestData="SysDiagCancel",n.FailedEventType=e.Utility.EventTypeEnum.DiagCancelFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.ScanCancel,t,!1);this.RegisterCommand(i)},a.prototype._initInstallLSCCommand=function(){var i=this,a=[],o=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.DELETE,"DiagDlData~LscInstallData~DiagNxtCmd",!1,this._corsOperation);o.FailedEventType=e.Utility.EventTypeEnum.InstallLSCFailed,a.push(o);var r=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"DiagNxtCmd",!0,this._corsOperation,!1);r.SendFixedData=!0,r.RequestData="SysDiagInstLsc",r.FailedEventType=e.Utility.EventTypeEnum.InstallLSCFailed,a.push(r);var s=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"DiagDlData",!1,this._corsOperation);s.RetryInPeroid=!0,s.SetLoopExecution(!0,(function(e){return t.DLMInfrastructureLogic.ScanStatusLoopHandler(e)})),s.DataHandler=function(e,n){return t.DLMInfrastructureLogic.ScanStatusHandler(n,i,e)},s.FailedEventType=e.Utility.EventTypeEnum.InstallLSCFailed,a.push(s);var u=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"LscInstallData",!1,this._corsOperation);u.RetryInPeroid=!0,u.SetLoopExecution(!0,(function(e){return e.InstallStatus!==t.InstallAPPStatusEnum.Installing})),u.DataHandler=function(n,a){switch(a.InstallStatus){case t.InstallAPPStatusEnum.Installing:return i.TriggerEvent(e.Utility.EventTypeEnum.InstallLSCInstalling,n,a),!0;case t.InstallAPPStatusEnum.Complete:return i.TriggerEvent(e.Utility.EventTypeEnum.InstallLSCSuccess,n,a),!0;case t.InstallAPPStatusEnum.Canceled:return i.TriggerEvent(e.Utility.EventTypeEnum.InstallLSCCancelled,n,a),!1;default:return!1}},u.FailedEventType=e.Utility.EventTypeEnum.InstallLSCFailed,a.push(u);var l=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.GET,"DiagData",!1,this._corsOperation);l.SetLoopExecution(!0,(function(e){var t=e.Exception,i=e.OverallProgress;return t!==n.None&&t!==n.Wait||100===i||!0===e.IsCanceled})),l.DataHandler=function(t,a){switch(a.Exception){case n.None:return!0===a.IsCanceled?i.TriggerEvent(e.Utility.EventTypeEnum.DiagCancelSuccess,t,a):i.TriggerEvent(e.Utility.EventTypeEnum.DiagStatusSuccess,t,a),!0;case n.Wait:return!0===a.IsCanceled?i.TriggerEvent(e.Utility.EventTypeEnum.DiagCancelSuccess,t,a):i.TriggerEvent(e.Utility.EventTypeEnum.Waiting,t,a),!0;default:return i._diagCommonExceptionDataHander(a,t)}},l.Interval=3e3,l.FailedEventType=e.Utility.EventTypeEnum.DiagFailed,a.push(l);var p=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.DELETE,"DiagDlData~LscInstallData~DiagNxtCmd",!1,this._corsOperation);p.RunWhenFailed=!0,a.push(p);var c=new e.Component.Command(e.Component.CommandTypeEnum.InstallApp,a,!0);this.RegisterCommand(c)},a.prototype._initCancelInstallLSCCommand=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"DiagNxtCmd",!0,this._corsOperation,!1);n.SendFixedData=!0,n.RequestData="SysDiagInstLscCancel",n.FailedEventType=e.Utility.EventTypeEnum.InstallLSCCancelFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.InstallAppCancel,t,!1);this.RegisterCommand(i)},a.prototype._initCancelInstallLSCCommandAtStart=function(){var t=[],n=new e.Operation.HTTPRequest(e.Operation.HTTPMethodEnum.POST,"DiagNxtCmd",!0,this._corsOperation,!1);n.SendFixedData=!0,n.RequestData="SysDiagInstLscCancelAtStart",n.FailedEventType=e.Utility.EventTypeEnum.DownloadLSCCancelFailed,t.push(n);var i=new e.Component.Command(e.Component.CommandTypeEnum.DownloadAppCancel,t,!1);this.RegisterCommand(i)},a}(t.AbstractComponent);t.SysDiagV4=i,function(e){e[e.None=0]="None",e[e.SystemNotSupport=1]="SystemNotSupport",e[e.NoLSC=2]="NoLSC",e[e.ErrorLaunchLSC=3]="ErrorLaunchLSC",e[e.ErrorDownloadLSC=4]="ErrorDownloadLSC",e[e.LSCNotLaunch=5]="LSCNotLaunch",e[e.UnhandledException=6]="UnhandledException",e[e.WrongRequest=7]="WrongRequest",e[e.NotLenovo=8]="NotLenovo",e[e.Wait=9]="Wait",e[e.ModuleNotSupport=10]="ModuleNotSupport",e[e.NoWebAPIData=11]="NoWebAPIData",e[e.WrongWebAPIData=12]="WrongWebAPIData"}(n=t.SysDiagExceptionEnum||(t.SysDiagExceptionEnum={}))}(e.Component||(e.Component={}))}(LSBV4||(LSBV4={})),function(e){var t=function(){function t(){}return t._initComponents=function(){this.RegisterIngoreUniqueKeyEvent(e.Utility.EventTypeEnum.RedirectSuccess),this.RegisterIngoreUniqueKeyEvent(e.Utility.EventTypeEnum.RedirectFailed),this._componentTypeMap[e.Component.ComponentTypeEnum.Detect]=e.Component.DetectV4,this._componentTypeMap[e.Component.ComponentTypeEnum.DetectForHTTPPage]=e.Component.DetectForHTTPPageV4,this._componentTypeMap[e.Component.ComponentTypeEnum.DLM]=e.Component.DLMV4,this._componentTypeMap[e.Component.ComponentTypeEnum.DLMForHTTPPage]=e.Component.DLMForHTTPPageV4,this._componentTypeMap[e.Component.ComponentTypeEnum.ADUP]=e.Component.ADUPV4,this._componentTypeMap[e.Component.ComponentTypeEnum.ADUPForHTTPPage]=e.Component.ADUPForHTTPPageV4,this._componentTypeMap[e.Component.ComponentTypeEnum.OSDiag]=e.Component.OSDiagV4,this._componentTypeMap[e.Component.ComponentTypeEnum.OSDiagForHTTPPage]=e.Component.OSDiagForHTTPPageV4,this._componentTypeMap[e.Component.ComponentTypeEnum.SysDiag]=e.Component.SysDiagV4,this._componentTypeMap[e.Component.ComponentTypeEnum.SysDiagForHTTPPage]=e.Component.SysDiagForHTTPPageV4},t._initOperations=function(){e.Operation.HTTPRequest.AddLocalPort(50128),e.Operation.HTTPRequest.AddLocalPort(50129),e.Operation.HTTPRequest.AddLocalPort(50130)},t._initUtility=function(){e.Utility.ENABLE_LOG=!0},t._getComponent=function(t){var n=this._getComponentWithoutCreation(t);if(null!=n)return n;var i=this._componentTypeMap[t];if(null==i)return e.Utility.Log("Component of type "+e.Component.ComponentTypeEnum[t]+" is not mapped"),null;var a=new i(t);return this._addNewComponent(a),null!=(n=this._getComponentWithoutCreation(t))?n:null},t._getComponentWithoutCreation=function(e){var t=this._components.filter((function(t){return t.GetComponentType()===e}));return null!=t&&t.length>0?t[0]:null},t._addNewComponent=function(t){null!=t?this._components.some((function(e){return e.GetComponentType()===t.GetComponentType()}))?e.Utility.Log("Component of type "+e.Component.ComponentTypeEnum[t.GetComponentType()]+" has been existed"):this._components.push(t):e.Utility.Log("Invalid component")},t.Init=function(){e.Operation.RedirectOperation.InitWindowMessageLisenter()},t.InitConfig=function(){this._initUtility(),this._initOperations(),this._initComponents()},t.AddEventListener=function(t,n,i){var a=new e.Utility.EventHandler;a.EventType=t,a.EventHandler=n,a.uniqueKey=i,e.Utility.AddEventListener(a)},t.BatchAddEventListener=function(t,n,i){null!=i&&i.length>0&&i.forEach((function(i){var a=new e.Utility.EventHandler;a.EventType=i,a.EventHandler=t,a.uniqueKey=n,e.Utility.AddEventListener(a)}))},t.RemoveEventListener=function(t,n){e.Utility.RemoveEventListener(t,n)},t.ExecCommand=function(t,n,i,a){var o=this._getComponent(t);null!=o?o.ExecCommand(n,i,a):e.Utility.Log('Component "'+e.Component.ComponentTypeEnum[t]+'" is not existed')},t.RegisterIngoreUniqueKeyEvent=function(t){e.Component.AbstractComponent.RegisterIgnoreUniqueKeyEvent(t)},t._components=[],t._componentTypeMap={},t}();e.AbstractDispatcher=t;var n=function(e){function t(){var t=e.call(this)||this;return t.UniqueId="",t.UniqueId=(new Date).getTime().toString(),t}return __extends(t,e),t.prototype.AddEventListener=function(e,n){t.AddEventListener(e,n,this.UniqueId)},t.prototype.BatchAddEventListener=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];t.BatchAddEventListener(e,this.UniqueId,n)},t.prototype.RemoveEventListener=function(e){t.RemoveEventListener(e,this.UniqueId)},t.prototype.ExecCommand=function(e,n,i){t.ExecCommand(e,n,this.UniqueId,i)},t.GetDispatcher=function(){return new t},t}(t);e.Dispatcher=n}(LSBV4||(LSBV4={})),LSBV4.Dispatcher.InitConfig(),LSBV4.Dispatcher.Init(),function(e){var t=function(){function t(){}return t.GetLSBDetect=function(t,n,i){void 0===i&&(i=!1);var a=new e.ConvenientComponent.LSBDetect;return a.ISForVA=i,null!=t&&(a._successCallback=t),null!=n&&(a._failedCallback=n),a},t}();e.ConvenientComponent=t}(LSBV4||(LSBV4={})),function(e){!function(t){var n=function(){};t.LSBDetectCallbackData=n;var i=function(){function t(){this.ISForVA=!1,this._dispatcher=e.Dispatcher.GetDispatcher(),this._initEventHandler()}return t.prototype._initEventHandler=function(){var t=this;this._dispatcher.BatchAddEventListener((function(e){t.EventHandler(0,e)}),e.Utility.EventTypeEnum.DetectSuccess,e.Utility.EventTypeEnum.NotLenovo),this._dispatcher.BatchAddEventListener((function(){t.EventHandler(e.Component.DetectExceptionEnum.CommunicationFailed)}),e.Utility.EventTypeEnum.DetectFailed),this._dispatcher.BatchAddEventListener((function(){t.EventHandler(e.Component.DetectExceptionEnum.UserCancelled)}),e.Utility.EventTypeEnum.UserCancelled)},t.prototype.EventHandler=function(t,i){t=null==t?e.Component.DetectExceptionEnum.CommunicationFailed:t;var a=new n;switch(t){case e.Component.DetectExceptionEnum.None:null!=this._successCallback&&(null==i||$.isEmptyObject(i)||(null!=i.Mtm&&(e.Utility.SetCookie("MTM",i.Mtm),a.MTM=i.Mtm),null!=i.Sn&&(e.Utility.SetCookie("SN",i.Sn),e.Utility.SetCookie("ContactUsSN",i.Sn),e.Utility.SetCookie("ContactUsMTM",i.Mtm),a.SN=i.Sn),null!=i.Os&&e.Utility.SetCookie("OS",i.Os)),this._successCallback(a));break;case e.Component.DetectExceptionEnum.UserCancelled:null!=this._failedCallback&&this._failedCallback(!0);break;default:null!=this._failedCallback&&this._failedCallback(!1)}},t.prototype.Start=function(){var t=Cookies.get("MTM"),i=Cookies.get("SN");if(null!=t&&""!==t){var a=new n;a.MTM=t,a.SN=i,this._successCallback(a)}else this._dispatcher.ExecCommand(e.Component.ComponentTypeEnum.Detect,!1===this.ISForVA?e.Component.CommandTypeEnum.ScanStatus:e.Component.CommandTypeEnum.ScanStatusForVA)},t}();t.LSBDetect=i}(e.ConvenientComponent||(e.ConvenientComponent={}))}(LSBV4||(LSBV4={})),function(e){!function(t){var n=function(){};t.LSBDetectCallbackData=n;var i=function(){function t(t,n,i,a){this._dispatcher=e.Dispatcher.GetDispatcher(),this._successCallback=n,this._failedCallback=i,this._lsbInstallContainerStr=a,this._initEventHandler()}return t.prototype._initEventHandler=function(){var t=this;this._dispatcher.BatchAddEventListener((function(n){e.Utility.Log("LSB install or update success"),t._dispatcher.ExecCommand(e.Component.ComponentTypeEnum.Detect,t._dispatcher.LastCommandType),l.DTM.push({type:"eSupportProcess_Complete",name:"LSB:Success Machine Detection-"+t._dispatcher.LastCommandType,action:"Button Click",errorInfo:{message:"Detect Success:"+t._dispatcher.LastCommandType}})}),e.Utility.EventTypeEnum.PingSuccess,e.Utility.EventTypeEnum.LSBUpdateSuccess),this._dispatcher.BatchAddEventListener((function(e){t.EventHandler(0,e)}),e.Utility.EventTypeEnum.DetectSuccess,e.Utility.EventTypeEnum.NotLenovo),this._dispatcher.BatchAddEventListener((function(){t.EventHandler(e.Component.DetectExceptionEnum.CommunicationFailed)}),e.Utility.EventTypeEnum.DetectFailed),this._dispatcher.BatchAddEventListener((function(){t.EventHandler(e.Component.DetectExceptionEnum.UserCancelled),l.DTM.Lmd.pusherrorinfTrack("LSB Install Cancel","Install User Cancel")}),e.Utility.EventTypeEnum.UserCancelled)},t.prototype.EventHandler=function(t,i){t=null==t?e.Component.DetectExceptionEnum.CommunicationFailed:t;var a=new n;switch(t){case e.Component.DetectExceptionEnum.None:null!=this._successCallback&&(null==i||$.isEmptyObject(i)||(null!=i.Mtm&&(e.Utility.SetCookie("MTM",i.Mtm),Cookies.set("ContactUsMTM",i.Mtm,{path:"/"}),a.MTM=i.Mtm),null!=i.Sn&&(e.Utility.SetCookie("SN",i.Sn),Cookies.set("ContactUsSN",i.Sn,{path:"/"}),a.SN=i.Sn),null!=i.Os&&e.Utility.SetCookie("OS",i.Os)),this._successCallback(a));break;case e.Component.DetectExceptionEnum.UserCancelled:null!=this._failedCallback&&this._failedCallback(!0);break;default:null!=this._failedCallback&&this._failedCallback(!1)}},t.prototype.Start=function(){var t=Cookies.get("MTM"),i=Cookies.get("SN");if(null!=t&&""!==t){var a=new n;a.MTM=t,a.SN=i,this._successCallback(a)}else this._dispatcher.ExecCommand(e.Component.ComponentTypeEnum.Detect,e.Component.CommandTypeEnum.ScanStatus)},t}();t.LSBDetect=i,t.init=function(t,n,a){return new i(e.Dispatcher.GetDispatcher(),t,n,a)}}(e.Detect||(e.Detect={}))}(LSBV4||(LSBV4={}));